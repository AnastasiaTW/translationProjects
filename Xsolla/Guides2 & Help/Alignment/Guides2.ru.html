<div class="content">
        <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="xsolla_login" data-headings="xsolla_login">
</div>
<h1 data-headings="xsolla_login">
<a class="anchor" href="#xsolla_login">Xsolla Login </a>
</h1>
<p>Xsolla Login — система, предназначенная для разработчиков игр и приложений. В рамках подключения к Xsolla Login создается специальное приложение, позволяющее упростить процесс регистрации новых пользователей в игре, если они уже имеют учетную запись в социальных сетях. Кроме этого, с согласия пользователей, возможно получить доступ к информации из профиля в социальной сети для более глубокой интеграции с проектом.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="integration_guide" data-headings="integration_guide">
</div>
<h1 data-headings="integration_guide">
<a class="anchor" href="#integration_guide">Руководство по интеграции </a>
</h1>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="getting_started" data-headings="getting_started">
</div>
<h2 data-headings="getting_started">
<a class="anchor" href="#getting_started">Подготовка к работе </a>
</h2>
<p>Для начала работы необходимо зарегистрировать приложение, написав письмо на <a href="mailto:bizdev@xsolla.com">bizdev@xsolla.com</a>.</p>
<p>В письме необходимо указать:</p>
<ul> <li>
<b>Сайт</b> — адрес сайта игры, к которому планируется подключить Xsolla Login, например ht<span>tp://mysite.com</span>.</li> <li>
<b>Базовый домен</b> — базовый домен сайта, например, mysite.com. Можно указать несколько доменных имен, и, если есть необходимость, использовать один <em>projectId</em> на разных доменах.</li> <li>
<b>Список способов аутентификации</b> — список возможных способов аутентификации. Доступные варианты:<ul> <li>аутентификация через логин/пароль,</li> <li>через SMS,</li> <li>социальные сети ((Facebook, Twitter, Steam, Twitch, VK, Naver, и т.д.),</li> <li>i-pin (BETA),</li> <li>многофакторная аутентификация (BETA),</li> <li>сертификат (BETA)</li> <li>локальные социальные сети (BETA).</li> </ul> </li> </ul>
<p>Также необходимо указать список социальных сетей, через которые должна быть доступна аутентификация.</p>
<p>В ответном письме мы пришлем вам <em>projectId</em> и <em>secretKey</em>.</p>
<aside class="warning"> Обратите внимание, вызовы методов Xsolla Login можно осуществлять только на страницах с URL, принадлежащим базовому домену. </aside>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="xlwidget" data-headings="xlwidget">
</div>
<h2 data-headings="xlwidget">
<a class="anchor" href="#xlwidget">Виджет аутентификации </a>
</h2>
<p>Рассмотренный ниже пример добавляет виджет аутентификации стандартного вида. Вы можете настроить внешний вид блоков при помощи css. Шаблон SCSS доступен для скачивания по <a href="../files/xl-scss.zip" download="">ссылке</a>.</p>
<p>По умолчанию ширина блока 400px, высота зависит от аутентификационных опций.</p>
<p>
<a class="fancybox" rel="gallery_vc xsolla_login" href="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/developers_login_01.c7be3b3cc6.png" title="Example of a default design"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/developers_login_01.c7be3b3cc6.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/developers_login_01.e7fde1b10c@2x.png" alt="Example of a default design"> </a> <a class="fancybox" rel="gallery_vc xsolla_login" href="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/lif-login.af452a849d@1x.png" title="Example of a custom design"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/lif-login.af452a849d@1x.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/lif-login.14e399bbdb@2x.png" alt="Example of a custom design"> </a> <a class="fancybox" rel="gallery_vc xsolla_login" href="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/capital-login.035af309f8@1x.png" title="Example of a custom design"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/capital-login.035af309f8@1x.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/gallery/capital-login.2bfa5d3bba@2x.png" alt="Example of a custom design"> </a>
</p>
<h3 id="-">
<a class="anchor" href="#xlwidget_подключение-виджета">Подключение виджета</a>
<div class="header-anchor" id="xlwidget_подключение-виджета">
</div>
</h3>
<p>Для добавления виджета аутентификации Xsolla Login в игру, выполните следующие шаги:</p>
<ol> <li>В тег &lt;head&gt; добавьте подключение js-sdk.js: </li> </ol>
<pre>
<code>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"https://static.xsolla.com/xsolla-login/1.1.1/xl.min.js"</span>&gt;</span>
<span class="javascript">
</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code>
</pre>
<ol> <li value="2"> В тег &lt;body&gt; добавьте код для инициализации: </li> </ol>
<pre>
<code>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span>
<span class="javascript">
XL.init({
         projectId: <span class="hljs-string">'40db2ea4-5p47-11e6-a3ff-005056a0e04a'</span>,
         locale: <span class="hljs-string">'en_US'</span>,
         onlyWidgets: <span class="hljs-literal">true</span>,
         redirectUrl: <span class="hljs-string">'&lt;your redirect url&gt;'</span>,
         fields: <span class="hljs-string">'email'</span>
     });
</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code>
</pre>
<table> <thead> <tr> <th style="text-align:left">
<strong>Название</strong>
</th> <th style="text-align:left">
<strong>Тип</strong>
</th> <th style="text-align:left">
<strong>Описание</strong>
</th> </tr> </thead> <tbody> <tr> <td style="text-align:left">projectId</td> <td style="text-align:left">string</td> <td style="text-align:left">Идентификатор приложения. <strong>Обязательный</strong>.</td> </tr> <tr> <td style="text-align:left">locale</td> <td style="text-align:left">string</td> <td style="text-align:left">Локаль пользователя в формате &lt;language code&gt;_&lt;country code&gt;, где: <ul>
<li> <em>language code:</em> код языка в формате <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-2_codes" target="_blank">ISO 639 alpha-2</a>;</li>
<li>
<em>country code:</em> код страны (региона) в формате <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" target="_blank">ISO 3166-1 alpha-2</a>.</li>
</ul>
</td> </tr> <tr> <td style="text-align:left">redirectUrl</td> <td style="text-align:left">string</td> <td style="text-align:left">Адрес, на который следует перенаправить пользователя после аутентификации. <a href="#server_side">Передается в jwt-токене.</a>
</td> </tr> <tr> <td style="text-align:left">onlyWidgets</td> <td style="text-align:left">boolean</td> <td style="text-align:left">Инициализировать ли Xsolla Login только для подключения виджетов. 'true' по умолчанию.</td> </tr> <tr> <td style="text-align:left">preloader</td> <td style="text-align:left">string</td> <td style="text-align:left">Прелоадер, который будет показан до загрузки виджета. Необходимо указать html-код элемента.</td> </tr> <tr> <td style="text-align:left">fields</td> <td style="text-align:left">string</td> <td style="text-align:left">Данные, которые необходимо получить от пользователя. Допустимое значение: email. <strong>Обязательный</strong>
</td> </tr> </tbody> </table>
<ol> <li value="3"> Добавьте элемент DIV, в котором будет отображаться виджет, задайте ему уникальный id, и добавьте после него код инициализации виджета. </li> </ol>
<pre>
<code>
<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"xl_auth"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span>
<span class="javascript">
<span class="hljs-keyword">var</span> element_id = <span class="hljs-string">'xl_auth'</span>;
<span class="hljs-keyword">var</span> options = {
    width: <span class="hljs-string">'200px'</span>,
    height: <span class="hljs-string">'200px'</span>
};
XL.AuthWidget(element_id, options);
</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code>
</pre>
<table> <thead> <tr> <th style="text-align:left">
<strong>Название</strong>
</th> <th style="text-align:left">
<strong>Тип</strong>
</th> <th style="text-align:left">
<strong>Описание</strong>
</th> </tr> </thead> <tbody> <tr> <td style="text-align:left">element_id</td> <td style="text-align:left">string</td> <td style="text-align:left">id элемента-контейнера для блока аутентификации. <strong>Обязательный</strong>
</td> </tr> <tr> <td style="text-align:left">options</td> <td style="text-align:left">object</td> <td style="text-align:left">Настройки блока с виджетом.</td> </tr> <tr> <td style="text-align:left">options.width</td> <td style="text-align:left">string</td> <td style="text-align:left">Ширина блока.</td> </tr> <tr> <td style="text-align:left">options.height</td> <td style="text-align:left">string</td> <td style="text-align:left">Высота блока.</td> </tr> </tbody> </table>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="server_side" data-headings="server_side">
</div>
<h2 data-headings="server_side">
<a class="anchor" href="#server_side">Xsolla Login Server Side </a>
</h2>
<h3 id="-">
<a class="anchor" href="#server_side_схема-взаимодействия">Схема взаимодействия</a>
<div class="header-anchor" id="server_side_схема-взаимодействия">
</div>
</h3>
<div class="scheme login"> <div class="left-side"> <div class="block_1 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-start.3bce9008a7.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-start.7a65b69f72@2x.png"> <span class="xsolla-login-title">user redirected to redirecUrl</span> <div class="arrow"> <div>
</div> </div> </div> <button class="scheme-toggler" id="scheme_toggler">Показать всю схему</button> <div class="scheme-wrapper"> <div class="block_2 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-data.f3e1760e13.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-data.1533e13b07@2x.png"> <span class="xsolla-login-title">redirectUrl?token=&lt;token&gt;</span> <div class="arrow"> <div>
</div> </div> </div> <div class="block_3 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-if.9f7e4cf29d.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-if.2da829ce3f@2x.png"> <span class="xsolla-login-title">token exist?</span> <div class="arrow"> <div>
</div> </div> <span class="true-text">true</span> <div class="line line-right">
</div> <span class="false-text">false</span> <div class="line line-down"> <div>
</div> </div> </div> <div class="block_4 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-if.9f7e4cf29d.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-if.2da829ce3f@2x.png"> <span class="xsolla-login-title">token valid?</span> <div class="arrow"> <div>
</div> </div> <span class="true-text">true</span> <span class="false-text">false</span> <div class="line line-right">
</div> </div> <div class="block_5 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-if.9f7e4cf29d.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-if.2da829ce3f@2x.png"> <span class="xsolla-login-title">user exist?</span> <div class="arrow"> <div>
</div> </div> <span class="true-text">true</span> <span class="false-text">false</span> <div class="line line-right"> <div>
</div> </div> <div class="create-user"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.4710b04b36.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.3b56d02843@2x.png"> <span class="xsolla-login-title">create user</span> </div> <div class="form-error"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.4710b04b36.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.3b56d02843@2x.png"> <span class="xsolla-login-title">form errorUrl</span> </div> <div class="line line-down"> <div>
</div> </div> </div> <div class="block_6 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.4710b04b36.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.3b56d02843@2x.png"> <span class="xsolla-login-title">create successUrl</span> <div class="arrow"> <div>
</div> </div> <div class="line line-right"> <div>
</div> </div> <div class="arrow spec">
</div> </div> <div class="block_7 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.4710b04b36.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-fun.3b56d02843@2x.png"> <span class="xsolla-login-title">create domain specific user session</span> <div class="arrow"> <div>
</div> </div> </div> <div class="block_8 blocks"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-yes.238586eb98.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-yes.862a7ba28e@2x.png"> <span class="xsolla-login-title">redirect user to successUrl</span> <div class="redirect-error"> <img class="xsolla-login-img" src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-no.c98e3ebd52.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/xsolla_login/xsolla-login-no.0e7efdac7a@2x.png"> <span class="xsolla-login-title">redirect user to errorUrl</span> </div> </div> </div> </div> </div>
<h3 id="callback-url">
<a class="anchor" href="#server_side_callback-url">Callback URL</a>
<div class="header-anchor" id="server_side_callback-url">
</div>
</h3>
<p>URL, на который происходит перенаправление пользователя в браузере в конце процесса аутенификации.</p>
<h3 id="-">
<a class="anchor" href="#server_side_прохождение-аутентификации.-успех">Прохождение аутентификации. Успех</a>
<div class="header-anchor" id="server_side_прохождение-аутентификации.-успех">
</div>
</h3>
<p>В случае успеха пользователь будет переадресован на Ваш callback URL со следующим параметром:</p>
<p>
<strong>HTTP запрос</strong>
</p>
<p>
<code>GET https://callBackUrl.php?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</code>
</p>
<table> <thead> <tr> <th style="text-align:left">Параметр</th> <th style="text-align:left">Тип</th> <th style="text-align:left">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align:left">token</td> <td style="text-align:left">string</td> <td style="text-align:left">
<a href="https://en.wikipedia.org/wiki/JSON_Web_Token" target="_blank">JWT-token</a>. Вы можете <a href="https://jwt.io" target="_blank">дешифровать его</a>, используя секретный ключ.</td> </tr> <tr> <td style="text-align:left">is_linking</td> <td style="text-align:left">boolean</td> <td style="text-align:left">Пользователь прилинковал аккаунт.</td> </tr> </tbody> </table>
<h4 id="-">
<a class="anchor" href="#server_side_пример-дешифрованного-токена">Пример дешифрованного токена</a>
<div class="header-anchor" id="server_side_пример-дешифрованного-токена">
</div>
</h4>
<pre>
<code>{
  "<span class="hljs-attribute">exp</span>": <span class="hljs-value">
<span class="hljs-number">1471071785</span>
</span>,
  "<span class="hljs-attribute">iss</span>": <span class="hljs-value">
<span class="hljs-string">"https://login.xsolla.com"</span>
</span>,
  "<span class="hljs-attribute">iat</span>": <span class="hljs-value">
<span class="hljs-number">1470985385</span>
</span>,
  "<span class="hljs-attribute">id</span>": <span class="hljs-value">
<span class="hljs-string">"11111111"</span>
</span>,
  "<span class="hljs-attribute">name</span>": <span class="hljs-value">
<span class="hljs-string">"John Carter"</span>
</span>,
  "<span class="hljs-attribute">email</span>": <span class="hljs-value">
<span class="hljs-string">"john@example.com"</span>
</span>,
  "<span class="hljs-attribute">type</span>": <span class="hljs-value">
<span class="hljs-string">"social"</span>
</span>,
  "<span class="hljs-attribute">provider</span>": <span class="hljs-value">
<span class="hljs-string">"social_network"</span>
</span>,
  "<span class="hljs-attribute">xsolla_login_access_key</span>": <span class="hljs-value">
<span class="hljs-string">"s4dGNSPKinUxkSRI8rhPhZRElHj2yusqEeqgLIgn"</span>
</span>}
</code>
</pre>
<table> <thead> <tr> <th style="text-align:left">Параметр</th> <th style="text-align:left">Тип</th> <th style="text-align:left">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align:left">exp</td> <td style="text-align:left">string</td> <td style="text-align:left">Дата окончания действия токена. (Unix time)</td> </tr> <tr> <td style="text-align:left">iss</td> <td style="text-align:left">string</td> <td style="text-align:left">Указание, кто выдал JWT-token.</td> </tr> <tr> <td style="text-align:left">iat</td> <td style="text-align:left">string</td> <td style="text-align:left">Дата создания. (Unix time)</td> </tr> <tr> <td style="text-align:left">id</td> <td style="text-align:left">string</td> <td style="text-align:left">Идентификатор пользователя.</td> </tr> <tr> <td style="text-align:left">name</td> <td style="text-align:left">string</td> <td style="text-align:left">Полное имя пользователя.</td> </tr> <tr> <td style="text-align:left">email</td> <td style="text-align:left">string</td> <td style="text-align:left">email пользователя.</td> </tr> <tr> <td style="text-align:left">type</td> <td style="text-align:left">string</td> <td style="text-align:left">Тип аутентификации. Допустимые значения: "proxy" — проксированная аутентификация; "social" — вход через социальную сеть.</td> </tr> <tr> <td style="text-align:left">provider</td> <td style="text-align:left">string</td> <td style="text-align:left">Название социальной сети. Список допустимых значений: "vk", "facebook", "twitter", "steam", "baidu", "naver", "qq", "github", "microsoft", "linkedin", "google".</td> </tr> <tr> <td style="text-align:left">xsolla_login_access_key</td> <td style="text-align:left">string</td> <td style="text-align:left">Ключ доступа для вызова методов от имени пользователя.</td> </tr> </tbody> </table>
<h3 id="-">
<a class="anchor" href="#server_side_прохождение-аутентификации.-ошибка">Прохождение аутентификации. Ошибка</a>
<div class="header-anchor" id="server_side_прохождение-аутентификации.-ошибка">
</div>
</h3>
<p>В случае ошибки, пользователь будет перенаправлен на Ваш callback URL со следующими <a href="../api_v2.html#login_error">параметрами:</a>
</p>
<p>
<strong>HTTP запрос</strong>
</p>
<p>
<code>GET https://callBackUrl.php?error=003-002&amp;error_description=User+not+found&amp;redirect_url=https://site.com/fail_url</code>
</p>
<table> <thead> <tr> <th style="text-align:left">Параметр</th> <th style="text-align:left">Тип</th> <th style="text-align:left">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align:left">error</td> <td style="text-align:left">string</td> <td style="text-align:left">Группа кодов ошибок.</td> </tr> <tr> <td style="text-align:left">error_description</td> <td style="text-align:left">string</td> <td style="text-align:left">Описание ошибки.</td> </tr> <tr> <td style="text-align:left">redirect_url</td> <td style="text-align:left">string</td> <td style="text-align:left">Callback URL проекта.</td> </tr> </tbody> </table>
<h3 id="-api">
<a class="anchor" href="#server_side_дополнительные-методы-api">Дополнительные методы API</a>
<div class="header-anchor" id="server_side_дополнительные-методы-api">
</div>
</h3>
<p>Проксированная аутентификация может быть использована в том случае, если у Вас уже есть база пользователей. В этом случае необходимо реализовать следующие методы:</p>
<p>Xsolla Login будет вызывать методы с адресов <a href="https://login.xsolla.com/">https://login.xsolla.com/</a> и <a href="https://test-login.xsolla.com/">https://test-login.xsolla.com/</a>
</p>
<h4 id="-">
<a class="anchor" href="#server_side_проверка-логина-пароля">Проверка логина/пароля</a>
<div class="header-anchor" id="server_side_проверка-логина-пароля">
</div>
</h4>
<ul> <li>Тип: POST</li> <li>Content-type: application/json</li> <li>Тело запроса: <em>{"username":"ХХХХ", "password":"ХХХХ"}</em>
</li> <li>Успех: <em>{Ok 200}</em>
</li> <li>Неудачный запрос: <em>{"error": {"code": “003-001”, "description": "" }}</em>
</li> </ul>
<h4 id="-">
<a class="anchor" href="#server_side_регистрация">Регистрация</a>
<div class="header-anchor" id="server_side_регистрация">
</div>
</h4>
<ul> <li>Тип: POST</li> <li>Content-type: application/json</li> <li>Тело запроса: <em>{"username":"ХХХХ", "password":"ХХХХ", "email":"ХХХХ"}</em>
</li> <li>Успех: <em>{Ok 200}</em>
</li> <li>Неудачный запрос: <em>{error: {code: “003-003|004”, description: “” }}</em>
</li> </ul>
<h4 id="-">
<a class="anchor" href="#server_side_сброс-пароля">Сброс пароля</a>
<div class="header-anchor" id="server_side_сброс-пароля">
</div>
</h4>
<ul> <li>Тип: POST</li> <li>Content-type: application/json</li> <li>Тело запроса: <em>{"email":"ХХХХ"}</em>
</li> <li>Успех: <em>{Ok 200}</em>
</li> <li>Неудачный запрос: <em>{"error": {"code": “003-002”, "description": ""}}</em>
</li> </ul>
</div>
<div class="section-code">
</div>
</div>
    </div>

	<div class="content">
        <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="data-portal-intro" data-headings="data-portal-intro">
</div>
<h1 data-headings="data-portal-intro">
<a class="anchor" href="#data-portal-intro">Xsolla Data Portal на базе Slemma </a>
</h1>
<p>Этот гайд поможет вам ориентироваться в нашем <a href="https://slemma.com/demo/xsolla-payments" target="_blank">демо-примере</a>, и лучше понимать, как вы можете использовать данные отчеты при работе с вашей платежной аналитикой в <a href="https://publisher.xsolla.com" target="_blank">Личном Кабинете</a>. Ниже представлена информация о том как анализировать <a href="#dashboards">дашборды</a>, описания ко всем разделам, определения для различных <a href="#dataset-measures">метрик</a> и <a href="#dataset_dimensions">измерений</a>, а также список <a href="#faq_data_portal">Вопросов</a>. Если у вас возникнут вопросы, напишите нам на <a href="mailto:dataportal@xsolla.com" target="_blank">dataportal@xsolla.com</a>!</p>
<div class="video-container"> <iframe src="https://www.youtube.com/embed/JSoLff-hv4A" frameborder="0" allowfullscreen="" class="video">
</iframe> </div>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="dashboards" data-headings="dashboards">
</div>
<h1 data-headings="dashboards">
<a class="anchor" href="#dashboards">Дашборды </a>
</h1>
<p>Дашборд — это набор графиков и диаграмм, дающих вам возможность глубже анализировать конкретную проблему. Каждый из дашбордов позволит вам увеличить значения о какой-либо области деятельности вашей компании и принимать решения на основе анализируемых данных.</p>
<p>
<a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_overview_real.7a176f7234.png" title="Общая информаци"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_overview.6fffd7990b.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_overview.cd1871d505@2x.png" alt="Общая информаци"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_banks_real.e406e8c539.png" title="Банки-эмитенты"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_banks.2b9cf765ca.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_banks.ce05292c7a@2x.png" alt="Банки-эмитенты"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_revenue_trends_real.6520500024.png" title="Информация о доходе и трендах"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_revenue_trends.56c78e2f03.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_revenue_trends.4a98083f3f@2x.png" alt="Информация о доходе и трендах"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_payment_systems_revenue_real.100e11768d.png" title="Данные о способах оплаты"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_payment_systems_revenue.63fb89cbeb.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_payment_systems_revenue.15b656b58a@2x.png" alt="Данные о способах оплаты"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_paying_users_real.fbfabd4e46.png" title="Диаграмма платящих пользователей"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_paying_users.46cd6a1f7c.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_paying_users.d59b23f58d@2x.png" alt="Диаграмма платящих пользователей"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_revenue_currencies_real.95a276f72c.png" title="Доход в разрезе валют"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_revenue_currencies.e3b123289f.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_revenue_currencies.66c2affd53@2x.png" alt="Доход в разрезе валют"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_conversion_real.92d5b03bc3.png" title="Конверсия кредитных карт"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_conversion.7f5cce99c0.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_conversion.4733ea32b3@2x.png" alt="Конверсия кредитных карт"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_cancellations_reasons_real.e0fad6e649.png" title="Причины отмен платежей"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_cancellations_reasons.5d5b82ea61.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_cancellations_reasons.d687c34658@2x.png" alt="Причины отмен платежей"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_devices_operating_systems_paying_users_real.c3ab2080a4.png" title="Платящие пользователи в разрезе операционных систем"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_devices_operating_systems_paying_users.3b99bfe06e.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_devices_operating_systems_paying_users.e5c8ec6dd1@2x.png" alt="Платящие пользователи в разрезе операционных систем"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_geography_countries_bubbles_real.f234bfaf21.png" title="Пузырьковая диаграмма по странам"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_geography_countries_bubbles.cbf6168677.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_geography_countries_bubbles.794a660528@2x.png" alt="Пузырьковая диаграмма по странам"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_insights_real.0ef2022684.png" title="Данные о кредитных картах"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_insights.83a176fbe8.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_credit_cards_insights.8436f169d2@2x.png" alt="Данные о кредитных картах"> </a> <a class="fancybox" rel="gallery_data-portal data-portal-block-1" href="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_payment_systems_conversion_real.2443c0ce2c.png" title="Конверсия способов оплаты"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_payment_systems_conversion.8f9d26abe3.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/data-portal/data-portal_payment_systems_conversion.139c3f945f@2x.png" alt="Конверсия способов оплаты"> </a>
</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="dashboards-concepts" data-headings="dashboards-concepts">
</div>
<h1 data-headings="dashboards-concepts">
<a class="anchor" href="#dashboards-concepts">Основные понятия </a>
</h1>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Фильтры</a>
</h2>
<p>Для каждого дашборда есть несколько фильтров, расположенных в верхней части страницы, которые позволяют вам фильтровать данные по разным <a href="#dataset_dimensions">измерениям</a>. Чтобы использовать эти фильтры, выберите один и установите флажки измерений, по которым вы бы хотели ограничить выборку. Например, если в фильтре <strong>User Country</strong> выбрать <em>United States</em>, то на дашборде будут показаны данные о платежах только из <em>United States</em>. Чтобы исключить данные из выборки, используйте режим 'Exclude' в меню фильтра (меню появляется при нажатии на три точки справа от названия фильтра). Используйте фильтры, чтобы "углубиться" в данные об игре.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Значения показателей роста</a>
</h2>
<p>Показатели роста сравнивают текущее состояние выбранных <a href="#dataset_measures">метрик</a> с метриками за предыдущий период такой же длины. Зеленые, направленные вверх стрелки указывают на рост по сравнению с предыдущим периодом, а красные, направленные вниз стрелки означают падение.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Значения по выбранному периоду</a>
</h2>
<p>В отличие от значений, которые показывают лишь агрегированные данные за выбранный период, эти значения корректируются на основе периода времени, установленного в фильтре <strong>Date</strong>. Используйте этот фильтр для изменения агрегированного периода времени на дашборде, и эти значения также изменятся.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Среднесуточные значения</a>
</h2>
<p>В отличие от обычных значений, среднесуточные значения не будут увеличиваться при увеличении периода. Например, <strong>ARPPU</strong> будет расти при увеличении периода, потому что те же пользователи будут продолжать платить. Усредненный доход на платящего ежедневно активного пользователя (ARPPDAU) не будет расти, так как это среднее значение от всех средних значений за период, а не от общего количества платежей и среднего количества платящих пользователей.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Агрегация по неделям и месяцам</a>
</h2>
<p>Если вы выберите определенный период в фильтре <strong>Date</strong>, например 4 недели, то данные будут показаны, разделенные по неделям и показывать 4 недели. Агрегация данных за эти недели будет на основе всей активности за эти недели, а не средней от средних данных за день, которая будет показана, когда выбран фильтр по дням.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Параллельный период</a>
</h2>
<p>Графики параллельного периода позволят вам сделать анализ тренда.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Скользящая средняя</a>
</h2>
<p>Скользящая средняя является еще одним способом анализа тенденций. Временные рамки, используемые в расчетах, отображаются в названии метрик. Естественно, длительные временные отрезки дадут меньшую волатильность и покажут общую тенденцию рассматриваемого периода. Мы используем простую скользящую среднюю.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-excel" data-headings="-excel">
</div>
<h2 data-headings="-excel">
<a class="anchor" href="#-excel">Скачать любой график в excel</a>
</h2>
<p>При необходимости вы можете загрузить данные непосредственно из диаграммы. Щелкните правой кнопкой мыши по графику и загрузите данные в формате CSV, XLS, а также в PNG для использования в презентациях.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="dashboards-reference" data-headings="dashboards-reference">
</div>
<h1 data-headings="dashboards-reference">
<a class="anchor" href="#dashboards-reference">Справочник дашбордов </a>
</h1>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-3c42a1225b24aed8882b23874b8b827c4e8811b6-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-3c42a1225b24aed8882b23874b8b827c4e8811b6-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-3c42a1225b24aed8882b23874b8b827c4e8811b6-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-3c42a1225b24aed8882b23874b8b827c4e8811b6-target-_blank-demo-a-">Обзорный </a>
<a href="https://slemma.com/share/3c42a1225b24aed8882b23874b8b827c4e8811b6" target="_blank">(demo)</a>
</h2>
<p>Обзорный дашборд содержит KPI вашей игры, идеален для ежедневного анализа, а также для показа на вашем офисном TV. Включает <strong>Gross Revenue</strong>, <strong>Payments</strong>, <strong>Paying Users</strong>, <strong>ARPPU</strong>, <strong>Paid Invoices</strong> и <strong>Average Payment Amount</strong>.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-57107d069f10200b7cc0fae2a514052350b9dbec-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-57107d069f10200b7cc0fae2a514052350b9dbec-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-57107d069f10200b7cc0fae2a514052350b9dbec-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-57107d069f10200b7cc0fae2a514052350b9dbec-target-_blank-demo-a-">Игры </a>
<a href="https://slemma.com/share/57107d069f10200b7cc0fae2a514052350b9dbec" target="_blank">(demo)</a>
</h2>
<p>Игровой дашборд создан для анализа различных платежных ситуаций в ваших играх. Метрики заложены вместе с регулярными фильтрами, так что вы можете определить приоритеты и оценить разницу между вашими проектами. </p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-d761565a4d0a355ac3be414e5c3330f8f98f792f-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-d761565a4d0a355ac3be414e5c3330f8f98f792f-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-d761565a4d0a355ac3be414e5c3330f8f98f792f-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-d761565a4d0a355ac3be414e5c3330f8f98f792f-target-_blank-demo-a-">Платежные системы </a>
<a href="https://slemma.com/share/d761565a4d0a355ac3be414e5c3330f8f98f792f" target="_blank">(demo)</a>
</h2>
<p>Понимание того, как платят ваши пользователи может быть столь же важным, как и ответ на вопрос: "почему?". Данный дашборд должен помочь вам понять как различные подгруппы ваших пользователей совершают платежи и как вы можете оптимизировать свой сайт, показывая наиболее подходящие и наиболее популярные платежные системы.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-b7cdfeab7e5d08c88b51b2c1d10b8c6c584f18cc-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-b7cdfeab7e5d08c88b51b2c1d10b8c6c584f18cc-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-b7cdfeab7e5d08c88b51b2c1d10b8c6c584f18cc-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-b7cdfeab7e5d08c88b51b2c1d10b8c6c584f18cc-target-_blank-demo-a-">Кредитные карты </a>
<a href="https://slemma.com/share/b7cdfeab7e5d08c88b51b2c1d10b8c6c584f18cc" target="_blank">(demo)</a>
</h2>
<p>Дашборд кредитных карт полностью посвящен данным о кредитных картах. Анализ конверсии, причины отказа, а также информация о том как много пользователей разрешили Xsolla сохранить их платежные данные для будущих покупок (надежный индикатор их намерения еще вернуться в игру)!</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="revenue-a-href-https-slemma-com-share-279ee8a542f1f79b6d637d28ebcd0228bacc2869-target-_blank-demo-a-" data-headings="revenue-a-href-https-slemma-com-share-279ee8a542f1f79b6d637d28ebcd0228bacc2869-target-_blank-demo-a-">
</div>
<h2 data-headings="revenue-a-href-https-slemma-com-share-279ee8a542f1f79b6d637d28ebcd0228bacc2869-target-_blank-demo-a-">
<a class="anchor" href="#revenue-a-href-https-slemma-com-share-279ee8a542f1f79b6d637d28ebcd0228bacc2869-target-_blank-demo-a-">Revenue </a>
<a href="https://slemma.com/share/279ee8a542f1f79b6d637d28ebcd0228bacc2869" target="_blank">(demo)</a>
</h2>
<p>Revenue-дашборд предлагает несколько различных способов анализа тенденций. В данный дашборд включены параллельные периоды, средняя скользящая и диаграммы роста, все они могут помочь вам строить прогнозы. Также дашборд содержит лист валют; вы можете убедиться, что предлагаете все валюты, соответствующие областям присутствия ваших проектов.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-63c1084fc0efc9dd57e95bd7ce1050015e93fe4d-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-63c1084fc0efc9dd57e95bd7ce1050015e93fe4d-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-63c1084fc0efc9dd57e95bd7ce1050015e93fe4d-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-63c1084fc0efc9dd57e95bd7ce1050015e93fe4d-target-_blank-demo-a-">Платящие пользователи </a>
<a href="https://slemma.com/share/63c1084fc0efc9dd57e95bd7ce1050015e93fe4d" target="_blank">(demo)</a>
</h2>
<p>Paying Users дашборд — это способ понять характеристики вашего <strong>Revenue</strong>. Если <strong>Revenue</strong> увеличивается вы можете задать вопрос: новые пользователи становятся <strong>Paying Users</strong> или <strong>Existing Paying Users</strong> платят больше?</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="arppu-a-href-https-slemma-com-share-504433146eb4d07cbcb67ad2f0467f29aed6f17e-target-_blank-demo-a-" data-headings="arppu-a-href-https-slemma-com-share-504433146eb4d07cbcb67ad2f0467f29aed6f17e-target-_blank-demo-a-">
</div>
<h2 data-headings="arppu-a-href-https-slemma-com-share-504433146eb4d07cbcb67ad2f0467f29aed6f17e-target-_blank-demo-a-">
<a class="anchor" href="#arppu-a-href-https-slemma-com-share-504433146eb4d07cbcb67ad2f0467f29aed6f17e-target-_blank-demo-a-">ARPPU </a>
<a href="https://slemma.com/share/504433146eb4d07cbcb67ad2f0467f29aed6f17e" target="_blank">(demo)</a>
</h2>
<p>Average Revenue Per Paying User (ARPPU) это еще один способ увидеть характерное платежное поведение ваших пользователей. Данный дашборд также включает единичные значения Average Revenue Per Paying Daily Active User, который не увеличивается с течением времени от пользователей, совершивших единичный платеж.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-d185809a81a17fa74c872926a2cb66367ecd636c-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-d185809a81a17fa74c872926a2cb66367ecd636c-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-d185809a81a17fa74c872926a2cb66367ecd636c-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-d185809a81a17fa74c872926a2cb66367ecd636c-target-_blank-demo-a-">Виртуальная валюта </a>
<a href="https://slemma.com/share/d185809a81a17fa74c872926a2cb66367ecd636c" target="_blank">(demo)</a>
</h2>
<p>Дашборд виртуальной валюты будет информировать вас о том как много пользователей совершили покупки, расплатившись внутриигровой валютой. Также вы можете загрузить ваши внутриигровые данные о потраченной игровой валюте, создать сравнительный дашборд и проверить здоровье вашей внутриигровой экономики.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-1e3730294de65cf1904c2985dd815f836a6d2a77-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-1e3730294de65cf1904c2985dd815f836a6d2a77-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-1e3730294de65cf1904c2985dd815f836a6d2a77-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-1e3730294de65cf1904c2985dd815f836a6d2a77-target-_blank-demo-a-">География </a>
<a href="https://slemma.com/share/1e3730294de65cf1904c2985dd815f836a6d2a77" target="_blank">(demo)</a>
</h2>
<p>Дашборд поможет понять разницу между платежными привычками пользователей в зависимости от их местоположения. Каждый лист сгруппирован по различным признакам, включая такие как: <strong>Countries</strong>, <strong>Regions</strong>, <strong>Languages</strong>, <strong>Business Regions</strong> и <strong>Timezones</strong>.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-e3e689debbec5a0a0d5ec4efd74a92eee8ffa6d8-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-e3e689debbec5a0a0d5ec4efd74a92eee8ffa6d8-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-e3e689debbec5a0a0d5ec4efd74a92eee8ffa6d8-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-e3e689debbec5a0a0d5ec4efd74a92eee8ffa6d8-target-_blank-demo-a-">Девайсы </a>
<a href="https://slemma.com/share/e3e689debbec5a0a0d5ec4efd74a92eee8ffa6d8" target="_blank">(demo)</a>
</h2>
<p>Дашборд включает информацию об опыте пользователя в вашем интерфейсе. Вы можете использовать данную информацию для оптимизации вашего сайта для наиболее популярных девайсов и быть уверенным, что он работает в самых распространенных браузерах.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-a-href-https-slemma-com-share-4ba43a6b1671d29c9004991fe337ec62c82aaa0b-target-_blank-demo-a-" data-headings="-a-href-https-slemma-com-share-4ba43a6b1671d29c9004991fe337ec62c82aaa0b-target-_blank-demo-a-">
</div>
<h2 data-headings="-a-href-https-slemma-com-share-4ba43a6b1671d29c9004991fe337ec62c82aaa0b-target-_blank-demo-a-">
<a class="anchor" href="#-a-href-https-slemma-com-share-4ba43a6b1671d29c9004991fe337ec62c82aaa0b-target-_blank-demo-a-">Отмены </a>
<a href="https://slemma.com/share/4ba43a6b1671d29c9004991fe337ec62c82aaa0b" target="_blank">(demo)</a>
</h2>
<p>Дашборд позволит вам следить за фродом в вашей игре. Обзор листов будет показывать число отмен в <strong>Cancellation Date</strong>, <strong>Payment Date</strong>, как в процентах, так и географически. Список причин даст вам возможность увидеть распределение причин отмены для каждой отмены.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="xsolla-dataset" data-headings="xsolla-dataset">
</div>
<h1 data-headings="xsolla-dataset">
<a class="anchor" href="#xsolla-dataset">Xsolla Dataset</a>
</h1>
<p>Все эти предустановленные дашборды действительно хороши, но что если вы хотите создать свой собственный? Вы можете сделать это с помощью предоставленного Xsolla Dataset! Вы можете создать неограниченное количество дашбордов с вашим <a href="https://slemma.com" target="_blank">Slemma</a>-аккаунтом и вашими данными; постройте любой график с любыми метриками или измерениями.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="dataset_dimensions" data-headings="dataset_dimensions">
</div>
<h1 data-headings="dataset_dimensions">
<a class="anchor" href="#dataset_dimensions">Измерения </a>
</h1>
<p>Измерения отличаются от данных. Это не сами значения, но определенные категории значений. Всякий раз, когда вы используете фильтр, вы фильтруете данные по измерению.</p>
<p>Примеры измерений: <strong>Countr</strong>y, <strong>Credit Card Type</strong>, <strong>Date</strong>, и.т.д.</p>
<table> <thead> <tr> <th>Группа</th> <th>Название</th> <th>Описание</th> </tr> </thead> <tbody> <tr> <td>DateTime</td> <td>
<nobr>
<strong>Date</strong>
</nobr>
</td> <td>Дата по умолчанию для всех графиков в часовом поясе формата UTC. Данная дата основывается на последнем обновлении платежного статуса (invoice, payment, cancellation). Пример: когда вы хотите добавить платежи или отмены на единую временную шкалу, платежи будут агрегироваться по дате платежа, отмены — по дате отмены.</td> </tr> <tr> <td>DateTime</td> <td>
<nobr>
<strong>Invoice Date</strong>
</nobr>
</td> <td>Дата создания заявки в UTC .</td> </tr> <tr> <td>DateTime</td> <td>
<nobr>
<strong>Payment Date</strong>
</nobr>
</td> <td>Дата подтверждения платежа в UTC. Данная дата доступна только для завершенных платежей и не доступна для неоплаченных заявок.</td> </tr> <tr> <td>DateTime</td> <td>
<nobr>
<strong>Cancellation Date</strong>
</nobr>
</td> <td>Дата отмены платежа в UTC. Данные доступны для отмененных платежей.</td> </tr> <tr> <td>Projects</td> <td>
<nobr>
<strong>Project</strong>
</nobr>
</td> <td>ID пректа и название проекта</td> </tr> <tr> <td>Payment System</td> <td>
<nobr>
<strong>Payment System Group</strong>
</nobr>
</td> <td>Группа платежных систем, например: <em>Cash Payments</em>, <em>Bank Transfer</em>
</td> </tr> <tr> <td>Payment System</td> <td>
<nobr>
<strong>Payment System</strong>
</nobr>
</td> <td>ID платежной системы и название, например: <em>24. Paypal</em>, <em>57. PaySafeCard</em>
</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>User Country</strong>
</nobr>
</td> <td>Страна пользователя, определена системой Xsolla. Вычисленная страна является наиболее точной и подходящей. IP-адрес пользователя, страна мобильного оператора, страна банка, выпустившего кредитную карту и другие атрибуты используются для определения страны. Данная страна используется для внутренних вычислений VAT.</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>Language</strong>
</nobr>
</td> <td>Язык. Используется 2-буквенный код, вида <em>EN</em>, <em>PT</em>, <em>RU</em>
</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>IP Address Geography</strong>
</nobr>
</td> <td>Местоположение пользователя, вычисляется на основании IP-адреса. Данная иерархия содержит точную географическую информацию о <em>Region</em> и <em>Country</em> с <em>Country Subdivision</em> и <em>City</em>.</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>Timezone</strong>
</nobr>
</td> <td>Часовой пояс пользователя, определяется на основе IP-адреса пользователя, например: <em>Europe/Berlin</em>, <em>America/Chicago</em>
</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>Business Region</strong>
</nobr>
</td> <td>Бизнес-регион в <strong>User Country</strong>, например: <em>European Union</em>, <em>Latin America</em>
</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>Payment System Country</strong>
</nobr>
</td> <td>Страна происхождения платежной системы</td> </tr> <tr> <td>Geography</td> <td>
<nobr>
<strong>Issuing Bank Country</strong>
</nobr>
</td> <td>Страна банка, выпустившего карту польззователя</td> </tr> <tr> <td>Currencies</td> <td>
<nobr>
<strong>Payment Currency</strong>
</nobr>
</td> <td>Валюта платежа пользователя, 3-буквенное обозначение, вида: <em>USD</em>, <em>EUR</em>
</td> </tr> <tr> <td>Currencies</td> <td>
<nobr>
<strong>Payout Currency</strong>
</nobr>
</td> <td>Валюта выплаты банку-партнеру, 3-буквенное обозначение, вида: <em>USD</em>, <em>EUR</em>
</td> </tr> <tr> <td>Purchase</td> <td>
<nobr>
<strong>Purchase Type</strong>
</nobr>
</td> <td>Модуль Xsolla, использованный для совершения платежа: <em>Virtual Items</em>, <em>Virtual Currency</em>
</td> </tr> <tr> <td>Purchase</td> <td>
<nobr>
<strong>Is First Payment</strong>
</nobr>
</td> <td>
<em>True</em>, если это первый платеж для данного юзера, <em>false</em> в противном случае</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Is Credit Card</strong>
</nobr>
</td> <td>
<em>True</em>, если платеж совершен через кредитную карту, <em>false</em> в противном случае</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Issuing Bank</strong>
</nobr>
</td> <td>Банк, выпустивший кредитную карту</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Credit Card Brand</strong>
</nobr>
</td> <td>e.g <em>VISA</em>, <em>MasterCard</em>
</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Credit Card Type</strong>
</nobr>
</td> <td>e.g. <em>CREDIT</em>, <em>DEBIT</em>
</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Credit Card Category</strong>
</nobr>
</td> <td>e.g. <em>CLASSIC</em>, <em>GOLD</em>, <em>PLATINUM</em>
</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Is Payment Account Saved</strong>
</nobr>
</td> <td>
<em>True</em> если пользователь позволил Xsolla сохранить его платежную информацию для будущих покупок, <em>false</em> в противном случае</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Is Payment From Saved Account</strong>
</nobr>
</td> <td>
<em>True</em>, если платеж был совершен с использованием сохраненной ранее платежной информации пользователя, <em>false</em> в противном случае</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Is Credit Card Rejected</strong>
</nobr>
</td> <td>
<em>True</em>, если кредитная карта была отклонена во время процесса оплаты, <em>false</em> в противном случае. Причину отмены можно найти в измерении <strong>Credit Card Reject Reason</strong>
</td> </tr> <tr> <td>Credit Cards</td> <td>
<nobr>
<strong>Credit Card Reject Reason</strong>
</nobr>
</td> <td>e.g. <em>Insufficient Funds</em>, <em>Did not pass validation 3D-secure</em>
</td> </tr> <tr> <td>Recurring Payments</td> <td>
<nobr>
<strong>Is Recurrent Plan Created</strong>
</nobr>
</td> <td>
<em>True</em>, если из платежа была создана рекуррентная подписка, <em>false</em> в противном случае</td> </tr> <tr> <td>Recurring Payments</td> <td>
<nobr>
<strong>Is Recurrent Payment</strong>
</nobr>
</td> <td>
<em>True</em>, если списание с карты было совершено для оплаты рекуррентной подписки, <em>false</em> в противном случае</td> </tr> <tr> <td>User Agent</td> <td>
<nobr>
<strong>OS</strong>
</nobr>
</td> <td>Операционная система на девайсе пользователя, например: <em>Windows 8</em>, <em>MacOS</em>, <em>Android</em>
</td> </tr> <tr> <td>User Agent</td> <td>
<nobr>
<strong>Browser</strong>
</nobr>
</td> <td>Браузер пользователя, например: <em>Firefox</em>, <em>Chrome Mobile</em>
</td> </tr> <tr> <td>User Agent</td> <td>
<nobr>
<strong>Device</strong>
</nobr>
</td> <td>Модель мобильного устройства пользователя, например: <em>IPhone</em>, <em>Nokia Lumia</em>
</td> </tr> <tr> <td>User Agent</td> <td>
<nobr>
<strong>Screen Size</strong>
</nobr>
</td> <td>Разрешение экрана девайса пользователя</td> </tr> <tr> <td>User Agent</td> <td>
<nobr>
<strong>UI</strong>
</nobr>
</td> <td>Интерфейс Xsolla, через который был совершен платеж, например: <em>PayStation</em>, <em>Smartphone Version</em>
</td> </tr> <tr> <td>Developers</td> <td>
<nobr>
<strong>Payment Notification Delivery</strong>
</nobr>
</td> <td>Продолжительность обработки платежа на стороне Xsolla, например: <em>1-3 seconds</em>, <em>1-10 minutes</em>
</td> </tr> <tr> <td>Developers</td> <td>
<nobr>
<strong>Payment System Delay</strong>
</nobr>
</td> <td>Продолжительность обработки платежа на стороне платежной системы, например: <em>1-3 seconds</em>, <em>1-10 minutes</em>
</td> </tr> <tr> <td>Developers</td> <td>
<nobr>
<strong>Payment Flow</strong>
</nobr>
</td> <td>Общая продолжительностьобработки платежа, например: <em>1-3 seconds</em>, <em>1-10 minutes</em>
</td> </tr> <tr> <td>Cancellations</td> <td>
<nobr>
<strong>Is Cancelled</strong>
</nobr>
</td> <td>
<em>True</em>, если платеж отменен, <em>false</em> в противном случае. Причины отмены можно найти в измерении <strong>Cancellation Type</strong>
</td> </tr> <tr> <td>Cancellations</td> <td>
<nobr>
<strong>Cancellation Type</strong>
</nobr>
</td> <td>Причины отмены транзакции, например: <em>Refund</em>, <em>Chargeback</em>
</td> </tr> </tbody> </table>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="dataset_measures" data-headings="dataset_measures">
</div>
<h1 data-headings="dataset_measures">
<a class="anchor" href="#dataset_measures">Метрики </a>
</h1>
<p>Метрики, в отличие измерений, представляют собой значения, которые отображаются на графиках. Примеры метрик: <strong>Revenue</strong>, <strong>Paying Users</strong>, <strong>Conversion</strong>, <strong>Average Payments Amount</strong>.</p>
<table> <thead> <tr> <th>Группа</th> <th>Название</th> <th>Описание</th> </tr> </thead> <tbody> <tr> <td>Measures</td> <td>
<nobr>
<strong>Revenue</strong>
</nobr>
</td> <td>Сумма до вычета комиссий. Сумма конвертируется в валюту метрики по актуальному на дату уведомления проекта курсу .</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>Average Payment Amount</strong>
</nobr>
</td> <td>
<strong>Revenue</strong>, деленное количество <strong>Payments</strong>
</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>Gross Revenue</strong>
</nobr>
</td> <td>Сумма дохода <strong>Revenue</strong> без учета <strong>Cancellations Revenue</strong> за текущий период</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>Payments</strong>
</nobr>
</td> <td>Общая сумма завершенных платежей. Платежи могут быть отменены в будущих периодах.</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>Virtual Currency Amount</strong>
</nobr>
</td> <td>Количество приобретенной виртуальной валюты. Доступно в модуле <em>Virtual Currency</em>
</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>ARPPU</strong>
</nobr>
</td> <td>Average Revenue Per Paying User: <strong>Revenue</strong>, деленное на количество уникальных <strong>Paying Users</strong>. При использовании недельной или месячной агрегации <strong>ARPPU</strong> значительно возрастает, так как один пользователь может иметь несколько <strong>Payments</strong> за один период.</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>Payments per Paying User</strong>
</nobr>
</td> <td>Общее количество <strong>Payments</strong>, деленное на количество уникальных <strong>Paying users</strong>. Используется в еженедельных и ежемесячных агрегациях для аналитики частоты платежей.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Invoices</strong>
</nobr>
</td> <td>Общее количество созданных заявок.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Users</strong>
</nobr>
</td> <td>Общее количество пользователей, создавших <strong>Invoice</strong>. Пользователи, не завершившие платеж, также включены.</td> </tr> <tr> <td>Measures</td> <td>
<nobr>
<strong>Paying Users</strong>
</nobr>
</td> <td>Количество уникальных пользователей, совершивших как минимум один <strong>Payment</strong>в рассматриваемый период</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Paying Users Percent</strong>
</nobr>
</td> <td>Процент пользователей, завершивших платеж от общего числа пользователей, создавших заявку. <strong>Paying Users Percent</strong> более точное преобразование метрики (по сравнению с <strong>Paid Invoices Percent</strong>), так как пользователь может попробовать несколько способов оплаты, прежде чем завершит платеж.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Paid Invoices Percent</strong>
</nobr>
</td> <td>Процент завершенных <strong>Payments</strong> по отношению к общему числу <strong>Invoices</strong>
</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Churn Users</strong>
</nobr>
</td> <td>Количество пользователей создавших, но не оплативших заявку.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Churn Users Percent</strong>
</nobr>
</td> <td>Процент пользователей создавших, но не оплативших заявку.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Unpaid Invoices</strong>
</nobr>
</td> <td>Количество заявок, которые не были завершены пользователем и не подтверждены платежной системой.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Unpaid Invoices Percent</strong>
</nobr>
</td> <td>Процент <strong>Unpaid Invoices</strong> по отношению к общему количеству заявок</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>New Paying Users</strong>
</nobr>
</td> <td>Количество уникальных <strong>Paying users</strong>, совершивших первый платеж в рассматриваемый период.</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>New Paying Users Percent</strong>
</nobr>
</td> <td>Процент <strong>New Paying Users</strong> по отношению к общему числу <strong>Paying Users</strong>
</td> </tr> <tr> <td>Conversion</td> <td>
<nobr>
<strong>Existing Paying Users</strong>
</nobr>
</td> <td>Количество уникальных <strong>Paying Users</strong>, совершивших не первый платеж</td> </tr> <tr> <td>Cancellations</td> <td>
<nobr>
<strong>Cancellations</strong>
</nobr>
</td> <td>Количество <strong>Payments</strong> которые были возвращены или отменены</td> </tr> <tr> <td>Cancellations</td> <td>
<nobr>
<strong>Cancellations Percent</strong>
</nobr>
</td> <td>Процент <strong>Cancellations</strong> по отношению к общему числу <strong>Payments</strong>.</td> </tr> <tr> <td>Cancellations</td> <td>
<nobr>
<strong>Cancellations Revenue</strong>
</nobr>
</td> <td>Количество отмененных <strong>Payments</strong>.</td> </tr> <tr> <td>Cancellations</td> <td>
<nobr>
<strong>Cancellations Revenue Percent</strong>
</nobr>
</td> <td>Процент <strong>Cancellations Revenue</strong> по отношению к общему <strong>Revenue</strong>.</td> </tr> <tr> <td>Developers</td> <td>
<nobr>
<strong>Payment Notification Delivery, Seconds</strong>
</nobr>
</td> <td>Продолжительность обработки платежа на стороне Xsolla</td> </tr> <tr> <td>Developers</td> <td>
<nobr>
<strong>Payment System Delay, Seconds</strong>
</nobr>
</td> <td>Продолжительность обработки платежа на стороне платежной системы</td> </tr> <tr> <td>Developers</td> <td>
<nobr>
<strong>Payment Flow, Seconds</strong>
</nobr>
</td> <td>Общая продолжительность обработки платежа</td> </tr> </tbody> </table>
<p>Метрики могут быть агрегированы различными способами. Ниже приведено описание каждого типа агрегации, который вы увидите на ваших дашбордах:</p>
<table> <thead> <tr> <th>
</th> <th>
</th> </tr> </thead> <tbody> <tr> <td>
<strong>Count</strong>
</td> <td>Сколько раз произошло отслеживаемое событие. По умолчанию используется для <strong>Invoices</strong>, <strong>Paying Users</strong>, и.т.д.</td> </tr> <tr> <td>
<strong>Sum</strong>
</td> <td>Какова общая сумма числовых значений, связанных с отслеживаемым событием. По умолчанию используется для <strong>Gross Revenue</strong>, <strong>Virtual Currency Amount</strong>, и.т.д.</td> </tr> <tr> <td>
<strong>Average</strong>
</td> <td>Каково среднее значение метрики. Это будет использоваться для метрик, содержащих процентные отношения, поэтому не имеет смысла использовать такую агрегацию для метрик вида <strong>Sum</strong>. По умолчанию используется для <strong>Average Payment Amount</strong>, <strong>Churn Users Percent</strong>, и.т.д.</td> </tr> <tr> <td>
<strong>Maximum</strong>
</td> <td>Каково было максимальное значение данной метрики</td> </tr> <tr> <td>
<strong>Minimum</strong>
</td> <td>Каково было минимальное значение данной метрики</td> </tr> </tbody> </table>
</div>
<div class="section-code">
</div>
</div>
<!--
**Q.** Есть ли возможность расширить отчеты моими собственными внутриигровыми данными?

**A.** Да. Мы имеем специальное решение для игровой аналитики. Узнать больше о <a href="http://developers.xsolla.com/analytics.html" target="_blank">Xsolla Analytics API</a>

***--> <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="faq_data_portal" data-headings="faq_data_portal">
</div>
<h1 data-headings="faq_data_portal">
<a class="anchor" href="#faq_data_portal">FAQ </a>
</h1>
<p>
<strong>Q.</strong> Сколько это стоит?</p>
<p>
<strong>A.</strong> Для партнеров Xsolla это бесплатно.</p>
<hr>
<p>
<strong>Q.</strong> Как я могу активировать data portal для моего аккаунта?</p>
<p>
<strong>A.</strong> Вам необходимо иметь активный проект с завершенными платежами. Вы можете активировать data portal в <a href="https://publisher.xsolla.com" target="_blank">личном кабинете Xsolla</a>
</p>
<hr>
<p>
<strong>Q.</strong> В каких валютах данные?</p>
<p>
<strong>A.</strong> Доступно три валюты: Доллары США, Евро и российские Рубли. Также существует возможность фильтровать данные по валюте платежа.</p>
<hr>
<p>
<strong>Q.</strong> Как я могу загрузить свои собственные данные в <a href="https://slemma.com" target="_blank">Slemma</a>?</p>
<p>
<strong>A.</strong> Вы имеете несколько возможностей для загрузки дополнительных данных: загрузка файла с вашего компьютера или облачного хранилища, или напрямую подключиться к вашей БД. Подробная информация расположена в <a href="http://support.slemma.com" target="_blank">базе знаний Slemma</a>
</p>
<hr>
<p>
<strong>Q.</strong> Я обеспокоен конфиденциальностью и сохранностью моих данных.</p>
<p>
<strong>A.</strong> Мы храним все данные в собственном защищенном хранилище данных Xsolla внутри изолированного приватного облака Amazon Web Service. Все данные передаются в/из хранилища через зашифрованное соединение TLC. Необработанные платежные данные недоступны в <a href="https://slemma.com" target="_blank">Slemma</a>. Доступны только агреггированные данные, без персональной пользовательской информации. Мы применяем принципы наименьших привилегий, файерволлы, шифрования и других технологические и эксплуатационные подходы, чтобы сохранить ваши данные в безопасности.</p>
<hr>
<p>
<strong>Q.</strong> В данной аналитике не хватает некотрых данных, доступных в <a href="https://publisher.xsolla.com" target="_blank">личном кабинете Xsolla</a>. Как я могу получить их в <a href="https://slemma.com" target="_blank">Slemma</a>?</p>
<p>
<strong>A.</strong> Отправьте запрос на email <a href="mailto:dataportal@xsolla.com" target="_blank">dataportal@xsolla.com</a>
</p>
<hr>
<p>
<strong>Q.</strong> Возможна ли выгрузка данных из <a href="https://slemma.com" target="_blank">Slemma</a>?</p>
<p>
<strong>A.</strong>Вы можете скачивать графики и их данные в различных форматах из <a href="https://slemma.com" target="_blank">Slemma</a>, кликнув правой кнопкой мыши по объекту и выбрав тип файла. Также вы можете скачать дашборд целиком в PDF или PNG формате. Если вам нужны необработанные данные вы можете использовать <a href="http://developers.xsolla.com/api_v2.html#reports" target="_blank">Xsolla Reports API</a>.</p>
<hr>
<p>
<strong>Q.</strong> Могу ли я использовать данную аналитику для проверки финансовых отчетов?</p>
<p>
<strong>A.</strong> Нет, данные могут быть точны не на 100%, так как они используют среднесуточный обменных курс.</p>
<hr>
<p>
<strong>Q.</strong> Как часто обновляются данные?</p>
<p>
<strong>A.</strong> Данные обновляются ежедневно в 2:00 AM UTC</p>
<hr>
<p>
<strong>Q.</strong> Насколько точны метики?</p>
<p>
<strong>A.</strong> Мы получаем все метрики "на лету" из необработанных данных в нашем хранилище данных. Данный подход гарантирует точность для метрик с любой комбинацией группировки или фильтрации, особенно для подсчета количества уникальных значений или среднего метрик, к примеру, <strong>Paying Users</strong> и <strong>Average Payment Amount</strong>. Однако, мы не может предоставлять абсолютно точные финансовые данные, так как мы конвертируем платежные суммы в различный валютах со среднесуточным обменным курсом и используем округление до двух знаков после разделителя. Это означает, что разница редко превышает значение в $0.01.</p>
<hr>
<p>
<strong>Q.</strong> <a href="https://slemma.com" target="_blank">Slemma</a> и аналитика в <a href="https://publisher.xsolla.com" target="_blank">личном кабинете Xsolla</a> показывают разные значения. Почему?</p>
<p>
<strong>A.</strong> Данные в <a href="https://slemma.com" target="_blank">Slemma</a> в UTC таймзоне, тогда как данные в <a href="https://publisher.xsolla.com" target="_blank">личном кабинете Xsolla</a> в UTC+3 таймзоне. В будущем мы собираемся убрать такое поведение и показывать все данные в UTC таймзоне.</p>
<hr>
<p>
<strong>Q.</strong> Как я могу пригласить другого пользователя для сотрудничества?</p>
<p>
<strong>A.</strong> Когда вы активируете аналитику в <a href="https://publisher.xsolla.com" target="_blank">личном кабинете Xsolla</a> вы можете выбрать членов вашей команды и выслать им приглашение (по умолчанию все пользователи). После регистрации в <a href="https://slemma.com" target="_blank">Slemma</a>, вы можете пригласить нового пользователя в настройках <a href="https://slemma.com/team" target="_blank">Users and groups</a> .</p>
<hr>
<p>
<strong>Q.</strong> Как я могу создать свой собственный отчет?</p>
<p>
<strong>A.</strong> Да, вы действительно можете сделать это!</p>
<hr>
<p>
<strong>Q.</strong> Какие функции обеспечивает <a href="https://slemma.com" target="_blank">Slemma</a>?</p>
<p>
<strong>A.</strong> Командный совместный доступ к дашбордам, комментирование, аннотации, управление доступом и дашборды автоматически обновляются.</p>
<hr>
<p>
<strong>Q.</strong> У меня есть другие вопросы о <a href="https://slemma.com" target="_blank">Slemma</a>…</p>
<p>
<strong>A.</strong> Используйте ‘Click here for help'-виджет в левой нижней стороне <a href="https://slemma.com" target="_blank">Slemma</a> для получения доступа к базе знаний или контакта с саппортом при прмощи того же виджета.</p>
<hr>
<p>
<strong>Q.</strong> Как связать несколько аккаунтов в личном кабинете Xsolla со <a href="https://slemma.com" target="_blank">Slemma</a>?</p>
<p>
<strong>A.</strong> Свяжитесь с <a href="mailto:dataportal@xsolla.com" target="_blank">dataportal@xsolla.com</a>
</p>
<hr>
<p>
<strong>Q.</strong> Я не могу найти свой вопрос в данном списке…</p>
<p>
<strong>A.</strong> Не стесняйтесь обращатьс к нам по любым вопросам по адресу <a href="mailto:dataportal@xsolla.com" target="_blank">dataportal@xsolla.com</a>
</p>
</div>
<div class="section-code">
</div>
</div>
    </div>
	
<div class="content">
        <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="xsolla_network" data-headings="xsolla_network">
</div>
<h1 data-headings="xsolla_network">
<a class="anchor" href="#xsolla_network">Xsolla Network </a>
</h1>
<p>Xsolla Network — глобальное решение, которое помогает создать бренд игры, найти новых пользователей и распространить игру через доступ к десяткам аффилированных сетей, миллионам инфлюенсеров и сотням игровых медиа-порталов из одного места. Revenue Share или кампании, основанные на CPA легко настраиваются и запускаются за несколько минут, и, поскольку Xsolla интегрирована со всеми аффилированными лицами, разработчику игры не требуется дополнительно интегрироваться. Разработчик игр могут распространять свои предложения или сообщения для инфлюенсеров и игровых платформ и платить прямо из Личного Кабинета Xsolla, без необходимости подписания соглашения с каждым из них, экономя время, деньги и ресурсы R&amp;D.</p>
<ul> <li>Привлечение новых пользователей без предварительной оплаты;</li> <li>Вы можете сами определять уровень рекламы, в зависимости от процента, который вы готовы платить;</li> <li>Xsolla Network была протестирована с Life is Feudal, и показала себя эффективной;</li> <li>4M инфлюенсеров на более чем 10 самых популярных платформах;</li> <li>До 100 аффилированных сетей;</li> <li>Распространение новостей во всех игровых медиа;</li> <li>Инструменты отслеживания производительности и аналитики позволяют оценивать эффективность кампании по приобретению пользователей с помощью отслеживаемых ссылок, рекламных кодов или ключей активации продукта.</li> <li>Базовая интеграция не обязательна, если уже интегрирован Xsolla Login.</li> </ul>
<p>Xsolla Network — это часть продуктовой линейки Xsolla, и может быть использована вместе с Pay Station, Mobile Pay Station и/или Pay2Play. Для использования данного продукта необходимо реализовать подключение с одним из <a href="http://developers.xsolla.com/">модулей</a>.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="interaction_diagram" data-headings="interaction_diagram">
</div>
<h1 data-headings="interaction_diagram">
<a class="anchor" href="#interaction_diagram">Схема взаимодействия </a>
</h1>
<div class="getting-started"> <img src="https://cdn.xsolla.net/developers.xsolla.com/images/network_scheme.4b806ebea8.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/network_scheme.4b806ebea8.png" alt="Xsolla Network"> </div>
<p>1) Пользователь кликает на рекламный баннер и переходит на прокси-страницу в Xsolla, на которую передается информация об игре. Xsolla сохраняет utm-параметры из URL, включая уникальный ID события (например, Click ID), и создает универсальный параметр Tracking ID для дальнейшего взаимодействия.</p>
<p>2) Tracking ID сохраняется в cookie-файлах пользователя, пользователь автоматически перенаправляется на промо-страницу игры.</p>
<p>3) Пользователь начинает процесс регистрации в игре. Игра должна сохранить Tracking ID данного пользователя вместе с его данными в базе данных игры.</p>
<p>4) Игра уведомляет Xsolla об успешной регистрации пользователя через API метод.</p>
<p>5) При получении токена для инициализации интерфейса оплаты, необходимо добавить параметр Tracking ID. Когда платеж успешно совершен, Xsolla сохраняет данные о платеже вместе с Tracking ID в базе.</p>
<p>6) Информация, собранная на первом шаге, плюс данные об уникальном ID события (например, Click ID) передаются источнику трафика.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="integration_guide" data-headings="integration_guide">
</div>
<h1 data-headings="integration_guide">
<a class="anchor" href="#integration_guide">Руководство по интеграции </a>
</h1>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="token_receipt_changes" data-headings="token_receipt_changes">
</div>
<h2 data-headings="token_receipt_changes">
<a class="anchor" href="#token_receipt_changes">Изменения в получении токена </a>
</h2>
<p>Вам необходимо дополнительно передавать информацию о Tracking ID в JSON для получения токена. Tracking ID передается внутри объекта "user".</p>
<h3 id="-">
<a class="anchor" href="#token_receipt_changes_пример-запроса">Пример запроса</a>
<div class="header-anchor" id="token_receipt_changes_пример-запроса">
</div>
</h3>
<pre>
<code class="lang-shell">    curl -v https:<span class="hljs-comment">//api.xsolla.com/merchant/merchants/{merchant_id}/token \</span>
    -X <span class="hljs-keyword">POST</span> \
    -<span class="hljs-keyword">u</span> your_merchant_id:merchant_api_key \
    -<span class="hljs-keyword">H</span> 'Content-<span class="hljs-keyword">Type</span>:application/json' \
    -<span class="hljs-keyword">H</span> 'Accept: application/json' \
    -<span class="hljs-keyword">d</span> '
    {
        <span class="hljs-string">"user"</span>: {
            <span class="hljs-string">"id"</span>: {
                <span class="hljs-string">"value": "1234567"</span>
            },
            <span class="hljs-string">"tracking_id"</span>: {
                <span class="hljs-string">"value": "trackingID"</span>
            }
        },
        <span class="hljs-string">"settings"</span>: {
            <span class="hljs-string">"project_id"</span>: 14004
        }
    }'
</code>
</pre>
<p>Все параметры, которые уже присутствовали в JSON для получения токена, должны остаться без изменений.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="new_api_method" data-headings="new_api_method">
</div>
<h2 data-headings="new_api_method">
<a class="anchor" href="#new_api_method">Новый метод API </a>
</h2>
<p>Когда пользователь с Tracking ID успешно регистрируется в игре, игра должна прислать запрос при помощи API метода.</p>
<h3 id="-">
<a class="anchor" href="#new_api_method_пример-запроса">Пример запроса</a>
<div class="header-anchor" id="new_api_method_пример-запроса">
</div>
</h3>
<pre>
<code class="lang-shell">curl -v 'https://api.xsolla.com/merchant/merchants/{merchant_id}/xsolla_network/
user_register/{tracking_id}' \
-<span class="ruby">
<span class="hljs-constant">X</span> <span class="hljs-constant">PUT</span> \
</span>-<span class="ruby">u <span class="hljs-symbol">merchant_id:</span>merchant_api_key</span>
</code>
</pre>
<table> <thead> <tr> <th>Параметр</th> <th>Тип</th> <th>Описание</th> </tr> </thead> <tbody> <tr> <td>merchant_id</td> <td>int</td> <td>ID мерчанта.</td> </tr> <tr> <td>tracking_id</td> <td>string</td> <td>Tracking ID.</td> </tr> </tbody> </table>
<h3 id="-">
<a class="anchor" href="#new_api_method_пример-успешного-ответа">Пример успешного ответа</a>
<div class="header-anchor" id="new_api_method_пример-успешного-ответа">
</div>
</h3>
<pre>
<code class="lang-http">
<span class="hljs-status">HTTP/1.1 <span class="hljs-number">204</span> No Content</span>
</code>
</pre>
</div>
<div class="section-code">
</div>
</div>
    </div>
	
	<div class="content">
        <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="pay2play" data-headings="pay2play">
</div>
<h1 data-headings="pay2play">
<a class="anchor" href="#pay2play">Pay2Play </a>
</h1>
<p>Модуль <b>Pay2Play</b> позволяет разработчикам игр продавать пин-коды напрямую с сайта игры. Для перехода в магазин используется виджет Pay2Play. Модуль имеет несколько вариантов интеграции и предлагает следующие возможности:</p>
<ul> <li>Выбор платформы для каждой DRM</li> <li>Разные цены для разных DRM</li> <li>Выбор размера и цветовой темы виджета</li> <li>Чаевые разработчику</li> </ul>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="user_flow" data-headings="user_flow">
</div>
<h1 data-headings="user_flow">
<a class="anchor" href="#user_flow">Пользовательский сценарий </a>
</h1>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/Pay2Play_userflow.5827dbc490.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/Pay2Play_userflow.f018c8c528@2x.png" width="730px" class="m-t m-b">
</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="integration_types" data-headings="integration_types">
</div>
<h1 data-headings="integration_types">
<a class="anchor" href="#integration_types">Варианты интеграции </a>
</h1>
<p>Возможны два варианта интеграции модуля — базовая и расширенная.</p>
<h3 id="-span-basic_integration-span-">
<a class="anchor" href="#integration_types_базовая-интеграция-basic_integration">Базовая интеграция </a>
<div class="header-anchor" id="integration_types_базовая-интеграция-basic_integration">
</div>
</h3>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/Pay2Play_partnerflow_basic.6fbae1f6dc.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/Pay2Play_partnerflow_basic.7cf3e6d494@2x.png" width="730px" class="m-t m-b">
</p>
<p>Особенности базовой интеграции:</p>
<ul> <li>Быстрый запуск модуля</li> <li>Не требует генерации токена и наличия серверной части</li> <li>Подходит для продажи игры без предварительной авторизации пользователя</li> </ul>
<h3 id="-span-advanced_integration-span-">
<a class="anchor" href="#integration_types_расширенная-интеграция-advanced_integration">Расширенная интеграция </a>
<div class="header-anchor" id="integration_types_расширенная-интеграция-advanced_integration">
</div>
</h3>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/Pay2Play_partnerflow_adv.1bfcc4e872.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/Pay2Play_partnerflow_adv.f36a898873@2x.png" width="730px" class="m-t m-b">
</p>
<p>Особенности расширенной интеграции:</p>
<ul> <li>Позволяет безопасно передать данные пользователя для дальнейшей привязки покупки на стороне игры</li> <li>Требует реализации серверной части</li> </ul>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="basic_integration_guide" data-headings="basic_integration_guide">
</div>
<h1 data-headings="basic_integration_guide">
<a class="anchor" href="#basic_integration_guide">Руководство по базовой интеграции </a>
</h1>
<p>Для базовой интеграции модуля необходимо:</p>
<ol> <li>Зарегистрироваться в <a href="https://publisher.xsolla.com/" target="_blank">Личном Кабинете Xsolla</a>.</li> <li>
<a href="../pay2play.html#basic_create_project">Создать проект</a>.</li> <li>
<a href="../pay2play.html#basic_create_module">Настроить модуль</a>.</li> <li>
<a href="../pay2play.html#basic_testing">Протестировать</a> процесс оплаты.</li> <li>Добавить на страницу игры <a href="../pay2play.html#basic_widget">виджет Pay2Play</a>.</li> <li>Подписать договор.</li> </ol>
<p>В процессе интеграции понадобятся следующие параметры:</p>
<ul> <li>ID проекта. Отображается в URL Личного Кабинета при переходе в настройки проекта — <i>
<span>htt</span>ps://publisher.xsolla.com/{merchant_id}/projects/{project_id}/</i>.</li> </ul>
<aside class="notise2"> Данное руководство включает в себя минимальный набор настроек для быстрого запуска модуля. Полный список параметров описан в <a href="../api_v2.html" target="_blank">справочнике API</a>. Если у вас возникли вопросы по подключению, пожалуйста, обратитесь к аккаунт-менеджеру проекта. </aside>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="basic_create_project" data-headings="basic_create_project">
</div>
<h2 data-headings="basic_create_project">
<a class="anchor" href="#basic_create_project">Создание проекта </a>
</h2>
<ol> <li>Перейдите в раздел <b>Проекты</b> и нажмите кнопку <b>Создать проект</b>.</li> <li>В настройках проекта:<br>
<ul> <li>Установите переключатель <b>HTTP оповещения</b> в положение <b>Выкл.</b>
</li> <li>Установите переключатель <b>Беcсерверная интеграция</b> в положение <b>Вкл.</b>
</li> <li>Включите модуль <b>Pay2Play</b>.</li> </ul> </li> </ol>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="basic_create_module" data-headings="basic_create_module">
</div>
<h2 data-headings="basic_create_module">
<a class="anchor" href="#basic_create_module">Настройка модуля </a>
</h2>
<ol> <li>Перейдите в настройки модуля <b>Pay2Play</b> и задайте базовые настройки игры:<ul> <li>Название. </li> <li>Описание.</li> <li>Системные требования.</li> <li>SKU - уникальный идентификатор.</li> <li>Дата релиза.</li> <li>Изображение.</li> <li>DRM.</li> <li>Платформы, которые поддерживаются выбранными DRM.</li> </ul> </li> <li>Нажмите кнопку <b>Далее</b>.</li> <li>Настройте цены для выбранных DRM. Нажмите кнопку <b>Далее</b>.</li> <li>Установите переключатель <b>Загруженные коды</b> в положение <b>Вкл.</b>
</li> <li>Загрузите пин-коды для выбранных DRM.</li> </ol>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="basic_testing" data-headings="basic_testing">
</div>
<h2 data-headings="basic_testing">
<a class="anchor" href="#basic_testing">Тестирование процесса оплаты </a>
</h2>
<p>Xsolla Sandbox (“песочница”) — это автономная рабочая среда, в которой доступны все функции Live режима, кроме проведения реальных платежей. Вы можете получить доступ к Sandbox, отправив параметр <i>"settings.mode" = "sandbox"</i> в объекте <b>access_data</b>. Параметры и структура JSON внутри объекта <b>access_data</b> идентичны JSON в запросе на получение <a href="../api_v2.html#token" target="_blank">токена</a>.</p>
<aside class="notise2"> Для проведения тестового платежа не нужен пинкод. Если вы хотите провести платеж с погашением пинкода, эту операцию необходимо выполнять в Live режиме. </aside>
<p>Тестирование оплаты банковской картой:</p>
<ol> <li>Откройте магазин в sandbox-режиме.</li> <li>Выберите предмет покупки.</li> <li>Выберите группу способов оплаты <b>Банковские карты</b>.</li> <li>Введите реквизиты тестовой карты. Остальные поля могут быть заполнены любыми данными. Вы также можете указать неверные реквизиты (номер карты, срок действия или CVV) для генерации ошибки.</li> </ol>
<p>
<a href="../api_v2.html#test_cards" target="_blank">Список банковских карт для тестирования</a>
</p>
<p>
<b>Обратите внимание!</b> Платежи банковской картой в sandbox-режиме могут быть проведены только в валюте USD, EUR, RUB, GBP, SGD, HKD или THB.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="basic_widget" data-headings="basic_widget">
</div>
<h2 data-headings="basic_widget">
<a class="anchor" href="#basic_widget">Интеграция виджета Pay2Play </a>
</h2>
<p>
<a href="https://github.com/xsolla/pay2play-widget" target="_blank">Виджет Pay2Play</a> открывает магазин в lightbox (для полноэкранной версии) или в новом окне (для мобильных устройств и планшетов). Тип устройства определяется автоматически. Для получения кода виджета откройте настройки модуля в Личном Кабинете и перейдите на вкладку <b>Опубликовать</b>. Скопируйте код нужного виджета и добавьте его на сайт игры. Рекомендуется использовать асинхронную загрузку.</p>
<p>Пример асинхронной загрузки</p>
<div class="content-code"> <div class="language-switcher"> <div class="languages"> <div class="lang" data-lang="html">HTML</div> </div> </div> <pre>
<code class="lang-html"> <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span>
<span class="javascript">
     <span class="hljs-keyword">var</span> access_data = {<span class="hljs-string">"settings"</span>:{<span class="hljs-string">"project_id"</span>:<span class="hljs-number">14004</span>},<span class="hljs-string">"purchase"</span>:{<span class="hljs-string">"pin_codes"</span>:{<span class="hljs-string">"codes"</span>:[{<span class="hljs-string">"digital_content"</span>:<span class="hljs-string">"game_sku"</span>}]}}};
     <span class="hljs-keyword">var</span> target_element = <span class="hljs-string">"#widget-example-element"</span>;
     <span class="hljs-keyword">var</span> s = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
     s.type = <span class="hljs-string">"text/javascript"</span>;
     s.async = <span class="hljs-literal">true</span>;
     s.src = <span class="hljs-string">"//static.xsolla.com/embed/pay2play/2.1.0/widget.min.js"</span>;
     s.addEventListener(<span class="hljs-string">'load'</span>, <span class="hljs-function">
<span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
         <span class="hljs-keyword">var</span> widgetInstance = XPay2PlayWidget.create(access_data,target_element);
     }, <span class="hljs-literal">false</span>);
     <span class="hljs-keyword">var</span> head = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];
     head.appendChild(s);
 </span>
<span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code>
</pre> <p>Полный список параметров инициализации виджета доступен в <a href="../api_v2.html#pay2play_widget" target="_blank">справочнике API</a>, инструкция по добавлению виджета — в <a href="https://github.com/xsolla/pay2play-widget" target="_blank">проекте Github</a>.</p> <aside class="notise2"> <b>Обратите внимание!</b> Чтобы начать принимать реальные платежи, необходимо подписать договор. </aside> </div>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="advanced_integration_guide" data-headings="advanced_integration_guide">
</div>
<h1 data-headings="advanced_integration_guide">
<a class="anchor" href="#advanced_integration_guide">Руководство по расширенной интеграции </a>
</h1>
<p>Для расширенной интеграции модуля необходимо:</p>
<ol> <li>Зарегистрироваться в <a href="https://publisher.xsolla.com/" target="_blank">Личном Кабинете Xsolla</a>.</li> <li>
<a href="../pay2play.html#advanced_create_project">Создать проект</a>.</li> <li>
<a href="../pay2play.html#advanced_create_module">Настроить модуль</a>.</li> <li>
<a href="../pay2play.html#advanced_get_token">Получить токен</a>.</li> <li>
<a href="../pay2play.html#advanced_setup_webhooks">Настроить обработку оповещений</a>.</li> <li>
<a href="../pay2play.html#advanced_testing">Протестировать</a> процесс оплаты.</li> <li>Добавить на страницу игры <a href="../pay2play.html#advanced_widget">виджет Pay2Play</a> и подписать договор.</li> </ol>
<p>В процессе интеграции понадобятся следующие параметры:</p>
<ul> <li>ID мерчанта. Отображается в URL Личного Кабинета — <i>
<span>ht</span>tps://publisher.xsolla.com/{merchant_id}/</i>.</li> <li>Ключ API. Генерируется в Личном Кабинете в разделе <b>Настройки -&gt; Компания</b>.</li> <li>ID проекта. Отображается в URL Личного Кабинета при переходе в настройки проекта — <i>
<span>htt</span>ps://publisher.xsolla.com/{merchant_id}/projects/{project_id}/</i>.</li> <li>Секретный ключ проекта. Генерируется на странице настройки проекта.</li> </ul>
<aside class="notise2"> Данное руководство включает в себя минимальный набор настроек для быстрого запуска модуля. Полный список параметров описан в <a href="../api_v2.html" target="_blank">справочнике API</a>. Если у вас возникли вопросы по подключению, пожалуйста, обратитесь к аккаунт-менеджеру проекта. </aside>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="advanced_create_project" data-headings="advanced_create_project">
</div>
<h2 data-headings="advanced_create_project">
<a class="anchor" href="#advanced_create_project">Создание проекта </a>
</h2>
<ol> <li>Перейдите в раздел <b>Проекты</b> и нажмите кнопку <b>Создать проект</b>.</li> <li>В настройках проекта:<ul> <li>Установите переключатель <b>HTTP оповещения</b> в положение <b>Вкл.</b>
</li> <li>Укажите URL оповещений.</li> <li>Сгенерируйте секретный ключ проекта для подписи оповещений.</li> <li>Установите переключатель <b>Беcсерверная интеграция</b> в положение <b>Выкл.</b>
</li> <li>Включите модуль <b>Pay2Play</b>.</li> </ul> </li> </ol>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="advanced_create_module" data-headings="advanced_create_module">
</div>
<h2 data-headings="advanced_create_module">
<a class="anchor" href="#advanced_create_module">Настройка модуля </a>
</h2>
<ol> <li>Перейдите в настройки модуля <b>Pay2Play</b> и задайте базовые настройки игры:<ul> <li>Название. </li> <li>Описание.</li> <li>Системные требования.</li> <li>SKU - уникальный идентификатор.</li> <li>Дата релиза.</li> <li>Изображение.</li> <li>DRM.</li> <li>Платформы, которые поддерживаются выбранными DRM.</li> </ul> </li> <li>Нажмите кнопку <b>Далее</b>.</li> <li>Настройте цены для выбранных DRM. Нажмите кнопку <b>Далее</b>.</li> <li>Установите переключатель <b>Загруженные коды</b> в положение <b>Вкл.</b>
</li> <li>Загрузите пин-коды для выбранных DRM.</li> </ol>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="advanced_get_token" data-headings="advanced_get_token">
</div>
<h2 data-headings="advanced_get_token">
<a class="anchor" href="#advanced_get_token">Получение токена магазина </a>
</h2>
<p>Для интеграции магазина необходимо получить токен. Токен — это строка, в которой содержится информация об игре, пользователе и параметрах платежа. Xsolla API использует Basic HTTP-аутентификацию. Укажите свой ID мерчанта в качестве username и ключ API в качестве password.</p>
<p>Для получения доступа к sandbox-режиму используется параметр "mode" = "sandbox".</p>
<p>URL получения токена:</p>
<p>
<code>ht<span>tps://api.xsolla.com/merchant/merchants/{merchant_id}/token</span>
</code>
</p>
<p>В HTTP POST запросе вы можете указать параметры, которые нужно передать на платежный интерфейс. Запрос и ответ передаются в JSON формате.</p>
<p>Ниже указан пример получения токена на PHP с использованием <a href="../sdk.html">Xsolla PHP SDK</a>. Если вы разрабатываете на другом языке, можно использовать <em>CURL</em> пример (нажмите на кнопку CURL).</p>
<div class="content-code"> <div class="language-switcher"> <div class="languages"> <div class="lang active" data-lang="php">PHP</div> <div class="lang" data-lang="shell">CURL</div> </div> </div> <pre>
<code class="lang-php">
<span class="php">
<span class="hljs-preprocessor">&lt;?php</span>

<span class="hljs-keyword">use</span> <span class="hljs-title">Xsolla</span>\<span class="hljs-title">SDK</span>\<span class="hljs-title">API</span>\<span class="hljs-title">XsollaClient</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Xsolla</span>\<span class="hljs-title">SDK</span>\<span class="hljs-title">API</span>\<span class="hljs-title">PaymentUI</span>\<span class="hljs-title">TokenRequest</span>;

<span class="hljs-variable">$tokenRequest</span> = <span class="hljs-keyword">new</span> TokenRequest(<span class="hljs-variable">$projectId</span>, <span class="hljs-variable">$userId</span>);
<span class="hljs-variable">$tokenRequest</span>-&gt;setUserEmail(<span class="hljs-string">'email@example.com'</span>)
    -&gt;setExternalPaymentId(<span class="hljs-string">'12345'</span>)
    -&gt;setSandboxMode(<span class="hljs-keyword">true</span>)
    -&gt;setUserName(<span class="hljs-string">'USER_NAME'</span>)
    -&gt;setCustomParameters(<span class="hljs-keyword">array</span>(<span class="hljs-string">'key1'</span> =&gt; <span class="hljs-string">'value1'</span>, <span class="hljs-string">'key2'</span> =&gt; <span class="hljs-string">'value2'</span>));

<span class="hljs-variable">$xsollaClient</span> = XsollaClient::factory(<span class="hljs-keyword">array</span>(
    <span class="hljs-string">'merchant_id'</span> =&gt; MERCHANT_ID,
    <span class="hljs-string">'api_key'</span> =&gt; API_KEY
));
<span class="hljs-variable">$token</span> = <span class="hljs-variable">$xsollaClient</span>-&gt;createPaymentUITokenFromRequest(<span class="hljs-variable">$tokenRequest</span>);</span>
</code>
</pre> <pre>
<code class="lang-shell">    curl -v https:<span class="hljs-comment">//api.xsolla.com/merchant/merchants/{merchant_id}/token \</span>
    -X POST \
    -u your_merchant_id:merchant_api_key \
    -H <span class="hljs-string">'Content-Type:application/json'</span> \
    -H <span class="hljs-string">'Accept: application/json'</span> \
    -d <span class="hljs-string">'
    {
        "</span>user<span class="hljs-string">": {
            "</span>id<span class="hljs-string">": {
                "</span>value<span class="hljs-string">": "</span>
<span class="hljs-number">1234567</span>
<span class="hljs-string">"
            },
            "</span>email<span class="hljs-string">": {
                "</span>value<span class="hljs-string">": "</span>email@<span class="hljs-transposed_variable">example.</span>com<span class="hljs-string">"
            }
        },
        "</span>settings<span class="hljs-string">": {
            "</span>project_id<span class="hljs-string">": 14004,
            "</span>mode<span class="hljs-string">": "</span>sandbox<span class="hljs-string">"
        }
    }'</span>
</code>
</pre> <p>
</p>
</div>
<p>
</p>
<p>Полный список параметров доступен в <a href="../api_v2.html#token" target="_blank">справочнике API</a>.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="advanced_setup_webhooks" data-headings="advanced_setup_webhooks">
</div>
<h2 data-headings="advanced_setup_webhooks">
<a class="anchor" href="#advanced_setup_webhooks">Настройка оповещений </a>
</h2>
<p>Xsolla отправляет проекту следующие типы оповещений (webhooks):</p>
<ul> <li>Проверка существования пользователя</li> <li>Успешный платеж</li> <li>Отмена платежа</li> </ul>
<p>Чтобы подтвердить получение оповещения, ваш сервер должен вернуть 204 HTTP код без тела сообщения. Механизм работы оповещений с примерами обработки подробно описан в <a href="../api_v2.html#webhooks" target="_blank">справочнике API</a>.</p>
<h3 id="-span-create_signature-span-">
<a class="anchor" href="#advanced_setup_webhooks_формирование-подписи">Формирование подписи </a>
<div class="header-anchor" id="advanced_setup_webhooks_формирование-подписи">
</div>
</h3>
<p>Процесс формирования подписи включает следующие шаги:</p>
<ol> <li>Данные, переданные в запросе от сервера Xsolla, и секретный ключ проекта (генерируется на странице настройки проекта) конкатенируются в строку.</li> <li>Полученная строка хешируется с помощью SHA1 хеш-алгоритма.</li> <li>Подпись передается в Signature заголовке.</li> </ol>
<p>При обработке оповещения необходимо проверить, что полученная подпись и подпись, переданная в Signature заголовке, совпадают.</p>
<h3 id="-span-user_validation-span-">
<a class="anchor" href="#advanced_setup_webhooks_проверка-существования-пользователя">Проверка существования пользователя </a>
<div class="header-anchor" id="advanced_setup_webhooks_проверка-существования-пользователя">
</div>
</h3>
<p>Сервер Xsolla посылает запрос на URL оповещений проекта, чтобы проверить существование персонажа в игре.</p>
<p>Пример запроса</p>
<div class="content-code"> <div class="language-switcher"> <div class="languages"> <div class="lang active" data-lang="php">PHP</div> <div class="lang" data-lang="shell">CURL</div> </div> </div> <pre>
<code class="lang-php">
<span class="hljs-variable">$request</span> = <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'notification_type'</span> =&gt; <span class="hljs-string">'user_validation'</span>,
    <span class="hljs-string">'user'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'ip'</span> =&gt; <span class="hljs-string">'127.0.0.1'</span>,
        <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-string">'18777976552'</span>,
        <span class="hljs-string">'email'</span>=&gt; <span class="hljs-string">'email@example.com'</span>,
        <span class="hljs-string">'id'</span>=&gt; <span class="hljs-string">'1234567'</span>,
        <span class="hljs-string">'country'</span> =&gt; <span class="hljs-string">'US'</span>
    )
)
</code>
</pre> <pre>
<code class="lang-shell">curl -v https:<span class="hljs-comment">//example.com/ \</span>
-X POST \
-H <span class="hljs-string">'Content-Type:application/json'</span> \
-H <span class="hljs-string">'Accept: application/json'</span> \
-H <span class="hljs-string">'Authorization: Signature 13342703ccaca5064ad33ba451d800c5e823db8f'</span> \
-d <span class="hljs-string">'
{
    "</span>notification_type<span class="hljs-string">": "</span>user_validation<span class="hljs-string">",
    "</span>user<span class="hljs-string">": {
        "</span>ip<span class="hljs-string">": "</span>
<span class="hljs-number">127.0</span>
<span class="hljs-number">.0</span>
<span class="hljs-number">.1</span>
<span class="hljs-string">",
        "</span>phone<span class="hljs-string">": "</span>
<span class="hljs-number">18777976552</span>
<span class="hljs-string">",
        "</span>email<span class="hljs-string">": "</span>email@<span class="hljs-transposed_variable">example.</span>com<span class="hljs-string">",
        "</span>id<span class="hljs-string">": "</span>
<span class="hljs-number">1234567</span>
<span class="hljs-string">",
        "</span>country<span class="hljs-string">": "</span>US<span class="hljs-string">"
    }
}'</span>
</code>
</pre> <p>Полный список параметров доступен в <a href="../api_v2.html#validate_user" target="_blank">справочнике API</a>.</p> <h3 id="-span-payment-span-">
<a class="anchor" href="#advanced_setup_webhooks_успешный-платеж">Успешный платеж </a>
<div class="header-anchor" id="advanced_setup_webhooks_успешный-платеж">
</div>
</h3> <p>Когда пользователь завершает процесс оплаты, сервер Xsolla отправляет проекту оповещение с информацией о платеже.</p> <p>Пример запроса</p> <div class="content-code"> <div class="language-switcher"> <div class="languages"> <div class="lang active" data-lang="php">PHP</div> <div class="lang" data-lang="shell">CURL</div> </div> </div> <pre>
<code class="lang-php">
<span class="hljs-variable">$request</span> = <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'notification_type'</span> =&gt; <span class="hljs-string">'payment'</span>,
    <span class="hljs-string">'purchase'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'virtual_items'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'items'</span> =&gt; <span class="hljs-keyword">array</span>(
                <span class="hljs-number">0</span> =&gt; <span class="hljs-keyword">array</span>(
                    <span class="hljs-string">'sku'</span> =&gt; <span class="hljs-string">'test_item1'</span>,
                    <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">1</span>,
                    ),
                <span class="hljs-number">1</span> =&gt; <span class="hljs-keyword">array</span>(
                    <span class="hljs-string">'sku'</span> =&gt; <span class="hljs-string">'test_item2'</span>,
                    <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">1</span>,
                    ),
                <span class="hljs-number">2</span> =&gt; <span class="hljs-keyword">array</span>(
                    <span class="hljs-string">'sku'</span> =&gt; <span class="hljs-string">'test_item3'</span>,
                    <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">1</span>,
                    ),
            )
        ),
        <span class="hljs-string">'total'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.99</span>
        )
    ),
    <span class="hljs-string">'user'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'ip'</span> =&gt; <span class="hljs-string">'127.0.0.1'</span>,
        <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-string">'18777976552'</span>,
        <span class="hljs-string">'email'</span> =&gt; <span class="hljs-string">'email@example.com'</span>,
        <span class="hljs-string">'id'</span> =&gt; <span class="hljs-string">'1234567'</span>,
        <span class="hljs-string">'country'</span> =&gt; <span class="hljs-string">'US'</span>
    ),
    <span class="hljs-string">'transaction'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">87654321</span>,
        <span class="hljs-string">'payment_date'</span> =&gt; <span class="hljs-string">'2014-09-23T19:25:25+04:00'</span>,
        <span class="hljs-string">'payment_method'</span> =&gt; <span class="hljs-number">1380</span>,
        <span class="hljs-string">'dry_run'</span> =&gt; <span class="hljs-number">1</span>
    ),
    <span class="hljs-string">'payment_details'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'payment'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.99</span>
        ),
        <span class="hljs-string">'vat'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">0</span>
        ),
        <span class="hljs-string">'payout_currency_rate'</span> =&gt; <span class="hljs-number">1</span>,
        <span class="hljs-string">'payout'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.49</span>
        ),
        <span class="hljs-string">'xsolla_fee'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">0.19</span>
        ),
        <span class="hljs-string">'payment_method_fee'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">0.31</span>
        )
    )
)
</code>
</pre> <pre>
<code class="lang-shell">curl -v https:<span class="hljs-comment">//example.com/ \</span>
-X POST \
-H <span class="hljs-string">'Content-Type:application/json'</span> \
-H <span class="hljs-string">'Accept: application/json'</span> \
-H <span class="hljs-string">'Authorization: Signature 13342703ccaca5064ad33ba451d800c5e823db8f'</span> \
-d <span class="hljs-string">'
{
    "</span>notification_type<span class="hljs-string">": "</span>payment<span class="hljs-string">",
    "</span>purchase<span class="hljs-string">": {
        "</span>virtual_items<span class="hljs-string">": {
            "</span>items<span class="hljs-string">": [
                {
                    "</span>sku<span class="hljs-string">": "</span>test_item1<span class="hljs-string">",
                    "</span>amount<span class="hljs-string">": 1
                },
                {
                    "</span>sku<span class="hljs-string">": "</span>test_item2<span class="hljs-string">",
                    "</span>amount<span class="hljs-string">": 1
                },
                {
                    "</span>sku<span class="hljs-string">": "</span>test_item3<span class="hljs-string">",
                    "</span>amount<span class="hljs-string">": 2
                },
            ]
        },
        "</span>total<span class="hljs-string">": {
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 9.99
        }
    },
    "</span>user<span class="hljs-string">": {
        "</span>ip<span class="hljs-string">": "</span>
<span class="hljs-number">127.0</span>
<span class="hljs-number">.0</span>
<span class="hljs-number">.1</span>
<span class="hljs-string">",
        "</span>phone<span class="hljs-string">": "</span>
<span class="hljs-number">18777976552</span>
<span class="hljs-string">",
        "</span>email<span class="hljs-string">": "</span>email@<span class="hljs-transposed_variable">example.</span>com<span class="hljs-string">",
        "</span>id<span class="hljs-string">": "</span>
<span class="hljs-number">1234567</span>
<span class="hljs-string">",
        "</span>country<span class="hljs-string">": "</span>US<span class="hljs-string">"
    },
    "</span>transaction<span class="hljs-string">": {
        "</span>id<span class="hljs-string">": 87654321,
        "</span>payment_date<span class="hljs-string">": "</span>
<span class="hljs-number">2014</span>-<span class="hljs-number">09</span>-<span class="hljs-number">23</span>T19:<span class="hljs-number">25</span>:<span class="hljs-number">25</span>+<span class="hljs-number">04</span>:<span class="hljs-number">00</span>
<span class="hljs-string">",
        "</span>payment_method<span class="hljs-string">": 1380,
        "</span>dry_run<span class="hljs-string">": 1
    },
    "</span>payment_details<span class="hljs-string">": {
        "</span>payment<span class="hljs-string">": {
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 9.99
        },
        "</span>vat<span class="hljs-string">": {
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 0
        },
        "</span>payout_currency_rate<span class="hljs-string">": 1,
        "</span>payout<span class="hljs-string">": {
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 9.49
        },
        "</span>xsolla_fee<span class="hljs-string">": {
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 0.19
        },
        "</span>payment_method_fee<span class="hljs-string">": {
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 0.31
        }
    }
}'</span>
</code>
</pre> <p>Полный список параметров доступен в <a href="../api_v2.html#payment" target="_blank">справочнике API</a>.</p> <h3 id="-span-refund-span-">
<a class="anchor" href="#advanced_setup_webhooks_отмена-платежа">Отмена платежа </a>
<div class="header-anchor" id="advanced_setup_webhooks_отмена-платежа">
</div>
</h3> <p>Если пользователь отменяет платеж, сервер Xsolla отправляет проекту оповещение с информацией о платеже.</p> <p>Пример запроса</p> <div class="content-code"> <div class="language-switcher"> <div class="languages"> <div class="lang active" data-lang="php">PHP</div> <div class="lang" data-lang="shell">CURL</div> </div> </div> <pre>
<code class="lang-php">
<span class="hljs-variable">$request</span> = <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'notification_type'</span> =&gt; <span class="hljs-string">'refund'</span>,
    <span class="hljs-string">'purchase'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'virtual_currency'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'Coins'</span>,
            <span class="hljs-string">'quantity'</span> =&gt; <span class="hljs-number">100</span>,
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.99</span>
        ),
        <span class="hljs-string">'total'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.99</span>
        )
    ),
    <span class="hljs-string">'user'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'ip'</span> =&gt; <span class="hljs-string">'127.0.0.1'</span>,
        <span class="hljs-string">'phone'</span> =&gt; <span class="hljs-string">'18777976552'</span>,
        <span class="hljs-string">'email'</span> =&gt; <span class="hljs-string">'email@example.com'</span>,
        <span class="hljs-string">'id'</span> =&gt; <span class="hljs-string">'1234567'</span>,
        <span class="hljs-string">'country'</span> =&gt; <span class="hljs-string">'US'</span>
    ),
    <span class="hljs-string">'transaction'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">87654321</span>,
        <span class="hljs-string">'payment_date'</span> =&gt; <span class="hljs-string">'2014-09-23T19:25:25+04:00'</span>,
        <span class="hljs-string">'payment_method'</span> =&gt; <span class="hljs-number">1380</span>,
        <span class="hljs-string">'dry_run'</span> =&gt; <span class="hljs-number">1</span>
    ),
    <span class="hljs-string">'refund_details'</span> =&gt; (
            <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>,
            <span class="hljs-string">'reason'</span> =&gt; <span class="hljs-string">'Fraud'</span>
    ),
    <span class="hljs-string">'payment_details'</span> =&gt; <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'payment'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.99</span>
        ),
        <span class="hljs-string">'vat'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">0</span>
        ),
        <span class="hljs-string">'payout_currency_rate'</span> =&gt; <span class="hljs-number">1</span>,
        <span class="hljs-string">'payout'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">9.49</span>
        ),
        <span class="hljs-string">'xsolla_fee'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">0.19</span>
        ),
        <span class="hljs-string">'payment_method_fee'</span> =&gt; <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'currency'</span> =&gt; <span class="hljs-string">'USD'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-number">0.31</span>
        )
    )
);
</code>
</pre> <pre>
<code class="lang-shell">curl -v https:<span class="hljs-comment">//example.com/ \</span>
-X POST \
-H <span class="hljs-string">'Content-Type:application/json'</span> \
-H <span class="hljs-string">'Accept: application/json'</span> \
-H <span class="hljs-string">'Authorization: Signature 13342703ccaca5064ad33ba451d800c5e823db8f'</span> \
-d <span class="hljs-string">'
{
    "</span>notification_type<span class="hljs-string">":"</span>refund<span class="hljs-string">",
    "</span>purchase<span class="hljs-string">":{
        "</span>virtual_currency<span class="hljs-string">":{
            "</span>name<span class="hljs-string">": "</span>Coins<span class="hljs-string">",
            "</span>quantity<span class="hljs-string">":10,
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":100
        },
        "</span>subscription<span class="hljs-string">":{
            "</span>plan_id<span class="hljs-string">": "</span>b5dac9c8<span class="hljs-string">",
            "</span>subscription_id<span class="hljs-string">": "</span>
<span class="hljs-number">10</span>
<span class="hljs-string">",
            "</span>date_create<span class="hljs-string">": "</span>
<span class="hljs-number">2014</span>-<span class="hljs-number">09</span>-<span class="hljs-number">22</span>T19:<span class="hljs-number">25</span>:<span class="hljs-number">25</span>+<span class="hljs-number">04</span>:<span class="hljs-number">00</span>
<span class="hljs-string">",
            "</span>currency<span class="hljs-string">": "</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">": 9.99
        },
        "</span>checkout<span class="hljs-string">":{
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":50
        },
        "</span>virtual_items<span class="hljs-string">":{
            "</span>items<span class="hljs-string">":[
                {
                    "</span>sku<span class="hljs-string">": "</span>test_item1<span class="hljs-string">",
                    "</span>amount<span class="hljs-string">":1
                }
            ],
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":50
        },
        "</span>total<span class="hljs-string">":{
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":200
        }
    },
    "</span>user<span class="hljs-string">": {
        "</span>ip<span class="hljs-string">": "</span>
<span class="hljs-number">127.0</span>
<span class="hljs-number">.0</span>
<span class="hljs-number">.1</span>
<span class="hljs-string">",
        "</span>phone<span class="hljs-string">": "</span>
<span class="hljs-number">18777976552</span>
<span class="hljs-string">",
        "</span>email<span class="hljs-string">": "</span>email@<span class="hljs-transposed_variable">example.</span>com<span class="hljs-string">",
        "</span>id<span class="hljs-string">": "</span>
<span class="hljs-number">1234567</span>
<span class="hljs-string">",
        "</span>name<span class="hljs-string">": "</span>Xsolla User<span class="hljs-string">",
        "</span>country<span class="hljs-string">": "</span>US<span class="hljs-string">"
    },
    "</span>transaction<span class="hljs-string">":{
        "</span>id<span class="hljs-string">":1,
        "</span>external_id<span class="hljs-string">":1,
        "</span>dry_run<span class="hljs-string">":1,
        "</span>agreement<span class="hljs-string">":1
    },
    "</span>refund_details<span class="hljs-string">":{
        "</span>code<span class="hljs-string">":1,
        "</span>reason<span class="hljs-string">":"</span>Fraud<span class="hljs-string">"
    },
    "</span>payment_details<span class="hljs-string">":{
        "</span>xsolla_fee<span class="hljs-string">":{
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":"</span>
<span class="hljs-number">10</span>
<span class="hljs-string">"
        },
        "</span>payout<span class="hljs-string">":{
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":"</span>
<span class="hljs-number">200</span>
<span class="hljs-string">"
        },
        "</span>payment_method_fee<span class="hljs-string">":{
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
            "</span>amount<span class="hljs-string">":"</span>
<span class="hljs-number">20</span>
<span class="hljs-string">"
        },
        "</span>payment<span class="hljs-string">":{
            "</span>currency<span class="hljs-string">":"</span>USD<span class="hljs-string">",
           "</span>amount<span class="hljs-string">":"</span>
<span class="hljs-number">230</span>
<span class="hljs-string">"
        }
    }
}'</span>
</code>
</pre> <p>
</p>
</div>
<p>
</p> <p>Полный список параметров доступен в <a href="../api_v2.html#refund" target="_blank">справочнике API</a>.</p> <h3 id="-span-advanced_test_webhooks-span-">
<a class="anchor" href="#advanced_setup_webhooks_тестирование-оповещений">Тестирование оповещений </a>
<div class="header-anchor" id="advanced_setup_webhooks_тестирование-оповещений">
</div>
</h3> <p>Чтобы протестировать обработчик оповещений:</p> <ol> <li>Откройте настройки модуля в Личном Кабинете.</li> <li>Перейдите на вкладку <b>Тестирование</b>.</li> <li>Введите тестовые данные и нажмите кнопку <b>Запустить тесты</b>: сервер Xsolla отправит все типы оповещений.</li> <li>Если скрипт вернул корректный ответ, тест помечается зеленым цветом, в случае ошибки — красным.</li> </ol> <div class="section-anchor" id="advanced_testing" data-headings="advanced_testing">
</div>
<h2 data-headings="advanced_testing">
<a class="anchor" href="#advanced_testing">Тестирование процесса оплаты </a>
</h2> <p>Xsolla Sandbox ("песочница") — это автономная рабочая среда, в которой доступны все функции Live режима, кроме проведения реальных платежей. Вы можете получить доступ к Sandbox, отправив параметр <i>"mode" = "sandbox"</i> при <a href="../api_v2.html#token" target="_blank">получении токена</a>.</p> <aside class="notise2"> Для проведения тестового платежа не нужен пинкод. Если вы хотите провести платеж с погашением пинкода, эту операцию необходимо выполнять в Live режиме. </aside> <p>Тестирование оплаты банковской картой:</p> <ol> <li>Откройте магазин в sandbox-режиме.</li> <li>Выберите предмет покупки.</li> <li>Выберите группу способов оплаты <strong>Банковские карты</strong>.</li> <li>Введите реквизиты карты из таблицы ниже. Остальные поля могут быть заполнены любыми данными. Вы также можете указать неверные реквизиты (номер карты, срок действия или CVV) для генерации ошибки.</li> </ol> <p>
<a href="../api_v2.html#test_cards" target="_blank">Список банковских карт для тестирования</a>
</p> <p>
<b>Обратите внимание!</b> Платежи банковской картой в sandbox-режиме могут быть проведены только в валюте USD, EUR, RUB, GBP, SGD, HKD или THB.</p> <div class="section-anchor" id="advanced_widget" data-headings="advanced_widget">
</div>
<h2 data-headings="advanced_widget">
<a class="anchor" href="#advanced_widget">Интеграция виджета Pay2Play </a>
</h2> <p>
<a href="https://github.com/xsolla/pay2play-widget" target="_blank">Виджет Pay2Play</a> открывает магазин в lightbox (для полноэкранной версии) или в новом окне (для мобильных устройств и планшетов). Тип устройства определяется автоматически. Для получения кода виджета откройте настройки модуля в Личном Кабинете и перейдите на вкладку <b>Опубликовать</b>. Скопируйте код нужного виджета и добавьте его на сайт игры. Рекомендуется использовать асинхронную загрузку.</p> <p>Пример асинхронной загрузки</p> <div class="content-code"> <div class="language-switcher"> <div class="languages"> <div class="lang" data-lang="html">HTML</div> </div> </div> <pre>
<code class="lang-html"> <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span>
<span class="javascript">
     <span class="hljs-keyword">var</span> access_data = {<span class="hljs-string">"settings"</span>:{<span class="hljs-string">"project_id"</span>:<span class="hljs-number">14004</span>},<span class="hljs-string">"purchase"</span>:{<span class="hljs-string">"pin_codes"</span>:{<span class="hljs-string">"codes"</span>:[{<span class="hljs-string">"digital_content"</span>:<span class="hljs-string">"game_sku"</span>}]}}};
     <span class="hljs-keyword">var</span> target_element = <span class="hljs-string">"#widget-example-element"</span>;
     <span class="hljs-keyword">var</span> s = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
     s.type = <span class="hljs-string">"text/javascript"</span>;
     s.async = <span class="hljs-literal">true</span>;
     s.src = <span class="hljs-string">"//static.xsolla.com/embed/pay2play/2.1.0/widget.min.js"</span>;
     s.addEventListener(<span class="hljs-string">'load'</span>, <span class="hljs-function">
<span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
         <span class="hljs-keyword">var</span> widgetInstance = XPay2PlayWidget.create(access_data,target_element);
     }, <span class="hljs-literal">false</span>);
     <span class="hljs-keyword">var</span> head = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];
     head.appendChild(s);
 </span>
<span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code>
</pre> <p>Полный список параметров инициализации виджета доступен в <a href="../api_v2.html#pay2play_widget" target="_blank">справочнике API</a>, инструкция по добавлению виджета — в <a href="https://github.com/xsolla/pay2play-widget" target="_blank">проекте Github</a>.</p> <aside class="notise2"> <b>Обратите внимание!</b> Чтобы начать принимать реальные платежи, необходимо подписать договор. </aside> </div>
</div>
</div>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="additional_features" data-headings="additional_features">
</div>
<h1 data-headings="additional_features">
<a class="anchor" href="#additional_features">Дополнительные возможности </a>
</h1>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="tips" data-headings="tips">
</div>
<h2 data-headings="tips">
<a class="anchor" href="#tips">Чаевые разработчику </a>
</h2>
<p>Проект может получать чаевые с каждой покупки. Для включения опции откройте настройки цен аддона и установите переключатель <b>Использовать чаевые в виджете Pay2Play</b> в положение <b>Вкл</b>. Для каждой добавленной валюты доступны три предустановленные суммы чаевых.</p>
<p>Пользователь сможет выбрать сумму чаевых перед переходом в магазин, чаевые будут добавлены к стоимости покупки.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="api_pin_codes" data-headings="api_pin_codes">
</div>
<h2 data-headings="api_pin_codes">
<a class="anchor" href="#api_pin_codes">Доставка пин-кодов пользователю по API </a>
</h2>
<p>Вы можете отправлять пин-коды при каждой покупке игры вместо загрузки файла с пин-кодами. Для включения опции необходимо:</p>
<ul> <li>реализовать обработку оповещения <a href="../api_v2.html#get_pin_code" target="_blank">Получение пин-кода</a>;</li> <li>в настройках аддона на вкладке <b>Загрузка кодов</b> установить переключатель <b>По требованию</b> в положение <b>Вкл.</b>, переключатель <b>Загруженные коды</b> — в положение <b>Выкл.</b>
</li> </ul>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="limit_sales" data-headings="limit_sales">
</div>
<h2 data-headings="limit_sales">
<a class="anchor" href="#limit_sales">Ограничение продаж пин-кодов </a>
</h2>
<p>Проект может ограничить количество доступных к продаже пин-кодов. По мере продажи пин-кодов вы будете получать уведомления по электронной почте. Первое уведомление будет отправлено, когда в продаже останется не более 100 пин-кодов, второе — когда все пин-коды будут проданы. При попытке приобрести пин-коды сверх лимита проведение платежа блокируется.</p>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/sold_out.58a2e21c8c.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/sold_out.e382398829@2x.png" width="730px" class="m-t m-b">
</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="regional_sale_restrictions" data-headings="regional_sale_restrictions">
</div>
<h2 data-headings="regional_sale_restrictions">
<a class="anchor" href="#regional_sale_restrictions">Региональные ограничения продаж </a>
</h2>
<p>Модуль <b>Pay2Play</b> позволяет настроить региональные ограничения продажи пин-кодов:</p>
<ul> <li>задать различную стоимость для отдельных стран или групп стран;</li> <li>запретить продажу в определенных странах.</li> </ul>
<p>После выполнения необходимых настроек при покупке пин-кода пользователь увидит предупреждение (если страна пользователя попадает под заданные ограничения). В странах, для которых продажа пин-кодов запрещена, проведение платежа блокируется.</p>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/reglock.4effd3ed91.png" data-at2x="https://cdn.xsolla.net/developers.xsolla.com/images/reglock.a1fe6f0316@2x.png" width="730px" class="m-t m-b">
</p>
<p>Для подключения опции обратитесь к аккаунт-менеджеру проекта. По каждой платформе, для которой необходимо настроить региональные ограничения, вам потребуется следующая информация:</p>
<ul> <li>Тип ограничения:<ul> <li>на активацию — пин-код может быть активирован только в определенных странах;</li> <li>на запуск — пин-код может быть активирован в любой стране, игра может быть запущена только в определенных странах;</li> <li>на активацию и на запуск — активация пин-кода и запуск игры могут быть выполнены только в определенных странах.</li> </ul> </li> <li>Список групп стран, для которых стоимость пин-кодов будет отличаться от базовых настроек модуля.</li> <li>Настройки для каждой группы стран:<ul> <li>Название группы.</li> <li>SKU — уникальный идентификатор группы.</li> <li>Список цен в разных валютах. Обязательно укажите цену в валюте, выбранной в настройках модуля по умолчанию.</li> <li>Список стран, входящих в группу.</li> </ul> </li> <li>Список стран, для которых продажа пин-кодов должна быть запрещена (при необходимости).</li> </ul>
<p>В рамках одной платформы страна может входить только в одну из групп с настройками цен или в список стран с запретом продажи. В странах, не вошедших ни в один из списков, продажа пин-кодов будет осуществляться без каких-либо ограничений и по ценам, указанным в базовых настройках модуля.</p>
<p>
<b>Обратите внимание!</b> Если активация пин-кодов и запуск игры выполняются на вашей стороне или на стороне платформы, в день релиза игры необходимо загружать пин-коды с уже настроенными региональными ограничениями.</p>
</div>
<div class="section-code">
</div>
</div>
    </div>
	
	<div class="content">
        <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="gifting" data-headings="gifting">
</div>
<h1 data-headings="gifting">
<a class="anchor" href="#gifting">Подарок другу </a>
</h1>
<p>Вы можете дать возможность пользователям приобретать пакеты виртуальной валюты, виртуальные товары или ключи доступа в качестве подарка друзьям в игре. После успешной оплаты покупателю отправляется чек, получателю - письмо с информацией о подарке. Покупатель подарка также может скрыть свои данные и отправить подарок анонимно.</p>
<p>Опция имеет несколько вариантов интеграции и предлагает игровым проектам следующие варианты покупок подарка:</p>
<ul> <li>Покупка пакета виртуальной валюты</li> <li>Покупка виртуальных товаров</li> <li>Покупка ключа активации игры</li> </ul>
<p>Опция доступна только для проектов, у которых отключено хранение данных пользователей на стороне Xsolla. </p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h1 data-headings="-">
<a class="anchor" href="#-">Сценарии взаимодействия</a>
</h1>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-" data-headings="-">
</div>
<h2 data-headings="-">
<a class="anchor" href="#-">Передача списка друзей в токене</a>
</h2>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/type1_03.140efdf180.png" width="730px" class="m-t m-b">
</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="-api" data-headings="-api">
</div>
<h2 data-headings="-api">
<a class="anchor" href="#-api">Передача списка друзей через API</a>
</h2>
<p>
<img src="https://cdn.xsolla.net/developers.xsolla.com/images/type2_03.166b51efde.png" width="730px" class="m-t m-b">
</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="integration_guide" data-headings="integration_guide">
</div>
<h1 data-headings="integration_guide">
<a class="anchor" href="#integration_guide">Руководство по интеграции </a>
</h1>
<p>В зависимости от модулей, которые включены для вашего проекта, доступны следующие варианты интеграции:</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="pay2play_module" data-headings="pay2play_module">
</div>
<h2 data-headings="pay2play_module">
<a class="anchor" href="#pay2play_module">Модуль Pay2Play </a>
</h2>
<p>Для подключения модуля необходимо:</p>
<ol> <li>
<a href="./pay2play.html">Настроить</a> модуль Pay2Play.</li> <li>Связаться с аккаунт-менеджером проекта для включения опции.</li> </ol>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="virtual_items_virtual_currency_payment_wall_modules" data-headings="virtual_items_virtual_currency_payment_wall_modules">
</div>
<h2 data-headings="virtual_items_virtual_currency_payment_wall_modules">
<a class="anchor" href="#virtual_items_virtual_currency_payment_wall_modules">Модуль виртуальной валюты, модуль виртуальных товаров или модуль реальной валюты </a>
</h2>
<p>Для подключения опции необходимо:</p>
<ol> <li>Настроить модуль <a href="./virtual_currency.html">виртуальной валюты</a>, <a href="./virtual_items.html">виртуальных товаров</a> или модуль <a href="./payment_wall.html">реальной валюты</a>.</li> <li>Реализовать <a href="#friend_via_api">метод API</a> для передачи списка друзей в Xsolla или добавить объект с данными о друзьях в <a href="#friend_via_token">запрос на получение токена</a>.</li> <li>Реализовать <a href="#setup_webhooks">обработку оповещения</a> об успешной оплате с добавленными данными о подарке.</li> <li>Связаться с аккаунт-менеджером проекта для включения опции.</li> </ol>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="create_module" data-headings="create_module">
</div>
<h2 data-headings="create_module">
<a class="anchor" href="#create_module">Настройка модуля </a>
</h2>
<p>Для подключения опции необходимо запустить модуль виртуальной валюты, виртуальных товаров или модуль виртуальной валюты.</p>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="friend_via_token" data-headings="friend_via_token">
</div>
<h2 data-headings="friend_via_token">
<a class="anchor" href="#friend_via_token">Передача списка друзей в токене </a>
</h2>
<p>При необходимости в запрос можно добавить массив со списком друзей пользователя. Если массив содержит всего один элемент, переданный друг автоматически определяется как получатель подарка. В <a href="./api_v2.html#token">запросе на получение токена</a> можно передавать не более 100 друзей. В запрос также можно включить объект с данными о подарке.</p>
<p>
<b>Пример запроса</b>
</p>
<pre>
<code class="lang-json">
<span class="hljs-string">"purchase"</span>:{

   <span class="hljs-string">"virtual_currency"</span>:{

       <span class="hljs-string">"quantity"</span>:<span class="hljs-number">100</span>

   },

   <span class="hljs-string">"description"</span>:{

       <span class="hljs-string">"value"</span>:<span class="hljs-string">"Test Purchase"</span>

   },

   <span class="hljs-string">"gift"</span>:{

       <span class="hljs-string">"giver_id"</span>:<span class="hljs-string">"John Smith"</span>,

       <span class="hljs-string">"message"</span>:<span class="hljs-string">"GG WP"</span>,

       <span class="hljs-string">"hide_giver_from_receiver"</span> : <span class="hljs-literal">true</span>,

       <span class="hljs-string">"friends"</span>: [

       {

        <span class="hljs-string">"id"</span>: <span class="hljs-string">"123"</span>,

        <span class="hljs-string">"name"</span>: <span class="hljs-string">"captain"</span>,

        <span class="hljs-string">"email"</span>: <span class="hljs-string">"captain@ship.com"</span>

       }]

   }

}
</code>
</pre>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="friend_via_api" data-headings="friend_via_api">
</div>
<h2 data-headings="friend_via_api">
<a class="anchor" href="#friend_via_api">Передача списка друзей по запросу к API </a>
</h2>
<p>Xsolla отправляет проекту <a href="./api_v2.html#friends_list">запрос на получение списка друзей</a> по адресу, указанному в качестве webhook URL в настройках проекта.</p>
<p>
<b>Формирование подписи</b>
</p>
<p>Процесс формирования подписи включает следующие шаги:</p>
<ol> <li>Параметры, переданные в запросе от сервера Xsolla, сортируются в алфавитном порядке.</li> <li>Значения параметров и секретный ключ проекта (генерируется на странице настройки проекта) конкатенируются в строку.</li> <li>Полученная строка хешируется с помощью SHA1 хеш-алгоритма.</li> <li>Подпись передается в параметре sign.</li> </ol>
<p>При обработке запроса к API необходимо проверить, что полученная подпись и подпись, переданная в параметре sign, совпадают.</p>
<h3 id="-span-getting_list_friends-span-">
<a class="anchor" href="#friend_via_api_получение-списка-друзей">Получение списка друзей </a>
<div class="header-anchor" id="friend_via_api_получение-списка-друзей">
</div>
</h3>
<p>
<b>Пример запроса</b>
</p>
<pre>
<code class="lang-http">$ curl -v 'https://your.webhook.url?<span class="hljs-variable">notification_type=</span>friends_list&amp;<span class="hljs-variable">user=</span>user_id&amp;<span class="hljs-variable">query=</span>frien&amp;<span class="hljs-variable">offset=</span>
<span class="hljs-number">10</span>&amp;<span class="hljs-variable">limit=</span>
<span class="hljs-number">20</span>&amp;<span class="hljs-variable">sign=</span>
<span class="hljs-number">12</span>dfg3f5gdsf4g5s6dfg2sdg1' \
-X GET \
-u merchant_id:merchant_api_key
</code>
</pre>
<p>
<b>Пример ответа</b>
</p>
<pre>
<code class="lang-json">[
  {
  "<span class="hljs-attribute">friends</span>": <span class="hljs-value">[
      {
        "<span class="hljs-attribute">id</span>": <span class="hljs-value">
<span class="hljs-string">"1"</span>
</span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">
<span class="hljs-string">"John Carter"</span>
</span>,
        "<span class="hljs-attribute">email</span>": <span class="hljs-value">
<span class="hljs-string">"carter@xsolla.com"</span>
</span>,
        "<span class="hljs-attribute">image_url</span>": <span class="hljs-value">
<span class="hljs-string">"https://partner/link/doctor.jpg"</span>
      </span>},
      {
        "<span class="hljs-attribute">id</span>": <span class="hljs-value">
<span class="hljs-string">"2"</span>
</span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">
<span class="hljs-string">"John Smith"</span>
</span>,
        "<span class="hljs-attribute">email</span>": <span class="hljs-value">
<span class="hljs-string">"smith@xsolla.com"</span>
</span>,
        "<span class="hljs-attribute">image_url</span>": <span class="hljs-value">
<span class="hljs-string">"https://partner/link/cook.jpg"</span>
      </span>}
    ]</span>,
  "<span class="hljs-attribute">total</span>": <span class="hljs-value">
<span class="hljs-number">10</span>
  </span>}
]
</code>
</pre>
</div>
<div class="section-code">
</div>
</div>
<div class="section-content">
<div class="section-description">
<div class="section-anchor" id="setup_webhooks" data-headings="setup_webhooks">
</div>
<h2 data-headings="setup_webhooks">
<a class="anchor" href="#setup_webhooks">Настройка оповещений </a>
</h2>
<p>При включении модулей виртуальной валюты и виртуальных товаров обязательным шагом является обработка <a href="./api_v2.html#payment">оповещения Payments</a>. При включении опции Подарок другу в JSON оповещения добавляется новый объект gift.purchase.</p>
<p>
<b>Пример запроса</b>
</p>
<pre>
<code class="lang-json">$curl -v 'https:<span class="hljs-comment">//your.hostname/your/uri' \</span>
-X POST \
-d '{
    <span class="hljs-string">"notification_type"</span>:<span class="hljs-string">"payment"</span>,
    <span class="hljs-string">"purchase"</span>:{
        <span class="hljs-string">"virtual_currency"</span>:{
            <span class="hljs-string">"name"</span>:<span class="hljs-string">"Coins"</span>,
            <span class="hljs-string">"sku"</span>:<span class="hljs-string">"test_package1"</span>,
            <span class="hljs-string">"quantity"</span>:<span class="hljs-number">10</span>,
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">100</span>
        },
        <span class="hljs-string">"subscription"</span>:{
            <span class="hljs-string">"plan_id"</span>: <span class="hljs-string">"b5dac9c8"</span>,
            <span class="hljs-string">"subscription_id"</span>: <span class="hljs-string">"10"</span>,
            <span class="hljs-string">"product_id"</span>: <span class="hljs-string">"Demo Product"</span>,
            <span class="hljs-string">"date_create"</span>: <span class="hljs-string">"2014-09-22T19:25:25+04:00"</span>,
            <span class="hljs-string">"date_next_charge"</span>: <span class="hljs-string">"2014-10-22T19:25:25+04:00"</span>,
            <span class="hljs-string">"currency"</span>: <span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>: <span class="hljs-number">9.99</span>
        },
        <span class="hljs-string">"checkout"</span>:{
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">50</span>
        },
        <span class="hljs-string">"virtual_items"</span>:{
            <span class="hljs-string">"items"</span>:[
                {
                    <span class="hljs-string">"sku"</span>: <span class="hljs-string">"test_item1"</span>,
                    <span class="hljs-string">"amount"</span>:<span class="hljs-number">1</span>
                }
            ],
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">50</span>
        },
        <span class="hljs-string">"gift"</span>:{
             <span class="hljs-string">"giver_ID"</span>:<span class="hljs-string">"John Smith"</span>,
             <span class="hljs-string">"receiver_ID"</span>:<span class="hljs-string">"Ivan Ivanov"</span>,
             <span class="hljs-string">"receiver_email"</span>:<span class="hljs-string">"example@example.com"</span>,
             <span class="hljs-string">"message"</span>:<span class="hljs-string">"GG WP"</span>,
             <span class="hljs-string">"hide_giver_from_receiver"</span>: <span class="hljs-keyword">true</span>
        },
        <span class="hljs-string">"total"</span>:{
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">200</span>
        },
        <span class="hljs-string">"promotions"</span>:[{
            <span class="hljs-string">"technical_name"</span>:<span class="hljs-string">"Demo Promotion"</span>,
            <span class="hljs-string">"id"</span>:<span class="hljs-string">"853"</span>
        }],
        <span class="hljs-string">"coupon"</span>:{
             <span class="hljs-string">"coupon_code"</span>:<span class="hljs-string">"ICvj45S4FUOyy"</span>,
             <span class="hljs-string">"campaign_code"</span>:<span class="hljs-string">"1507"</span>
        }
    },
    <span class="hljs-string">"user"</span>: {
        <span class="hljs-string">"ip"</span>: <span class="hljs-string">"127.0.0.1"</span>,
        <span class="hljs-string">"phone"</span>: <span class="hljs-string">"18777976552"</span>,
        <span class="hljs-string">"email"</span>: <span class="hljs-string">"email@example.com"</span>,
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"1234567"</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"Xsolla User"</span>,
        <span class="hljs-string">"country"</span>: <span class="hljs-string">"US"</span>
    },
    <span class="hljs-string">"transaction"</span>:{
        <span class="hljs-string">"id"</span>:<span class="hljs-number">1</span>,
        <span class="hljs-string">"external_id"</span>:<span class="hljs-number">1</span>,
        <span class="hljs-string">"payment_date"</span>:<span class="hljs-string">"2014-09-24T20:38:16+04:00"</span>,
        <span class="hljs-string">"payment_method"</span>:<span class="hljs-number">1</span>,
        <span class="hljs-string">"dry_run"</span>:<span class="hljs-number">1</span>,
        <span class="hljs-string">"agreement"</span>:<span class="hljs-number">1</span>
    },
    <span class="hljs-string">"payment_details"</span>:{
        <span class="hljs-string">"payment"</span>:{
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">230</span>
        },
        <span class="hljs-string">"vat"</span>: {
            <span class="hljs-string">"currency"</span>: <span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>: <span class="hljs-number">0</span>
        },
        <span class="hljs-string">"payout_currency_rate"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">"payout"</span>:{
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">200</span>
        },
        <span class="hljs-string">"xsolla_fee"</span>:{
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">10</span>
        },
        <span class="hljs-string">"payment_method_fee"</span>:{
            <span class="hljs-string">"currency"</span>:<span class="hljs-string">"USD"</span>,
            <span class="hljs-string">"amount"</span>:<span class="hljs-number">20</span>
        }
    },
    <span class="hljs-string">"custom_parameters"</span>:{
        <span class="hljs-string">"parameter1"</span>:<span class="hljs-string">"value1"</span>,
        <span class="hljs-string">"parameter2"</span>:<span class="hljs-string">"value2"</span>
    }
}'
</code>
</pre>
</div>
<div class="section-code">
</div>
</div>
    </div>
	
	<div class="content">
        <div class="section-content">
<div class="section-description">
<div class="section-anchor" id="paystation_domain" data-headings="paystation_domain">
</div>
<h1 data-headings="paystation_domain">
<a class="anchor" href="#paystation_domain">Запуск Pay Station на домене игры </a>
</h1>
<ol> <li>Зарегистрировать новое доменное имя вида <strong>secure.yourdomain.com</strong>. При регистрации следует указать текущий IP-адрес домена <strong>secure.xsolla.com</strong> (запись типа A), либо указать алиас на <strong>secure.xsolla.com</strong> (запись типа CNAME).</li> <li>Выпустить валидный сертификат SSL для данного домена — <strong>secure.yourdomain.com</strong>.</li> <li>
<p>Генерация ключа и запроса на подпись сертификата (CSR) с использованием пакета openssl. В командной строке выполните следующие инструкции:</p> <ul> <li>
<strong>Генерация ключа:</strong> <em>openssl genrsa -out server.key 2048</em>
</li> <li>
<p>
<strong>Генерация CSR:</strong> <em>openssl req -new -key server.key -out server.csr</em>
</p> <p>Во время генерации следует отвечать на вопросы в интерактивном режиме.</p> <p>
<strong>Важно!</strong> В поле <strong>Common Name</strong> нужно указать имя вашего домена (<strong>secure.yourdomain.com</strong>).</p> </li> </ul> </li> <li>
<p>Далее, на любом сайте, выдающем сертификаты (например, <a href="https://www.godaddy.com/web-security/ssl-certificate" target="_blank">GoDaddy</a>) оформляется сертификат. В процессе оформления будет запрошен CSR — следует скопировать в поле ввода содержимое файла <strong>server.csr</strong>.</p> <p>После проверки принадлежности домена регистратор высылает подписанный сертификат.</p> </li> <li>Выслать Xsolla ключ и сертификат на электронную почту <a href="mailto:sysadmins@xsolla.com">sysadmins@xsolla.com</a> с темой письма: <strong>[Ваша игра]: SSL Certificate</strong>.</li> <li>При интеграции через <strong>Pay Station Embed</strong> необходимо указать в параметре "host" ссылку на интерфейс оплаты.</li> </ol>
</div>
<div class="section-code">
</div>
</div>
    </div>